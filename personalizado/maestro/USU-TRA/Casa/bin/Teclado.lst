ANSI-C/cC++ Compiler for HC08 V-5.0.17, Apr 22 2003

    1:  /*
    2:  ** ###################################################################
    3:  **
    4:  **     THIS BEAN MODULE IS GENERATED BY THE TOOL. DO NOT MODIFY IT.
    5:  **
    6:  **     Filename  : Teclado.C
    7:  **
    8:  **     Project   : vph1
    9:  ** 
   10:  **     Processor : MC68HC908GP32CFB
   11:  **
   12:  **     Beantype  : BitsIO
   13:  **
   14:  **     Version   : Bean 02.016, Driver 02.10, CPU db: 2.87.041
   15:  **
   16:  **     Compiler  : Metrowerks HC08 C Compiler V-5.0.13
   17:  **
   18:  **     Date/Time : 4/19/lunes, 9:58
   19:  **
   20:  **     Abstract  :
   21:  **
   22:  **         This bean "BitsIO" implements a multi-bit input/output.
   23:  **         It uses selected pins of one 1-bit to 8-bit port.
   24:  **         Note: This bean is set to work in Input direction only.
   25:  **
   26:  **     Settings  :
   27:  **
   28:  **         Port name                   : PTA
   29:  **
   30:  **         Bit mask of the port        : 63
   31:  **         Number of bits/pins         : 6
   32:  **         Single bit numbers          : 0 to 5
   33:  **         Values range                : 0 to 63
   34:  **
   35:  **         Initial direction           : Input (direction cannot be changed)
   36:  **         Initial output value        : 0 = 000H
   37:  **         Initial pull option         : off
   38:  **
   39:  **         Port data register          : PTA       [0]
   40:  **         Port control register       : DDRA      [4]
   41:  **         Port function register      : INTKBIER  [27]
   42:  **
   43:  **             ----------------------------------------------------
   44:  **                   Bit     |   Pin   |   Name
   45:  **             ----------------------------------------------------
   46:  **                    0      |    32   |   PTA0_KBD0
   47:  **                    1      |    33   |   PTA1_KBD1
   48:  **                    2      |    34   |   PTA2_KBD2
   49:  **                    3      |    35   |   PTA3_KBD3
   50:  **                    4      |    36   |   PTA4_KBD4
   51:  **                    5      |    37   |   PTA5_KBD5
   52:  **             ----------------------------------------------------
   53:  **
   54:  **         Optimization for            : speed
   55:  **
   56:  **     Contents  :
   57:  **
   58:  **         GetDir - bool Teclado_GetDir(void);
   59:  **         GetVal - byte Teclado_GetVal(void);
   60:  **         GetBit - bool Teclado_GetBit(byte Bit);
   61:  **
   62:  **
   63:  **     (c) Copyright UNIS, spol. s r.o. 1997-2002
   64:  **
   65:  **     UNIS, spol. s r.o.
   66:  **     Jundrovska 33
   67:  **     624 00 Brno
   68:  **     Czech Republic
   69:  **
   70:  **     http      : www.processorexpert.com
   71:  **     mail      : info@processorexpert.com
   72:  **
   73:  ** ###################################################################
   74:  */
   75:  
   76:  #include "Teclado.h"
   77:  
   78:  /*Include shared modules, which are used for whole project*/
   79:  #include "PE_Types.h"
   80:  #include "PE_Error.h"
   81:  #include "PE_Const.h"
   82:  #include "IO_Map.h"
   83:  #include "Cpu.h"
   84:  
   85:  byte Teclado_Table[8]={ 1, 2, 4, 8, 16, 32, 64, 128 }; /* Table of mask constants */
   86:  /*
   87:  ** ===================================================================
   88:  **     Method      :  Teclado_GetMsk (bean BitsIO)
   89:  **
   90:  **     Description :
   91:  **         This method is internal. It is used by Processor Expert
   92:  **         only.
   93:  ** ===================================================================
   94:  */
   95:  byte Teclado_GetMsk(byte Value)
   96:  {

Function: Teclado_GetMsk
Source  : Z:\vph1\2puertas\CON-PTT\Casa\Code\Teclado.C
Options : -Cc -Env"GENPATH=Z:\vph1\2puertas\CON-PTT\Casa;Z:\vph1\2puertas\CON-PTT\Casa\bin;Z:\vph1\2puertas\CON-PTT\Casa\cmd;*Z:\vph1\2puertas\CON-PTT\Casa\Code;Z:\vph1\2puertas\CON-PTT\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\2puertas\CON-PTT\Comun;*Z:\vph1\2puertas\CON-PTT;Z:\vph1\2puertas\CON-PTT\Casa\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\2puertas\CON-PTT\Casa\bin -EnvTEXTPATH=Z:\vph1\2puertas\CON-PTT\Casa\bin -Lasm=%n.lst -ObjN=Z:\vph1\2puertas\CON-PTT\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\Teclado.C.o -Qvtpfar -WmsgSd1106

   97:    return((Value<6)?Teclado_Table[Value]:0); /* Return appropriate bit mask */
  0000 a106             CMP   #6
  0002 2502             BCS   L6 ;abs = 0006
  0004 4f               CLRA  
  0005 81               RTS   
  0006          L6:     
  0006 8c               CLRH  
  0007 97               TAX   
  0008 d60000           LDA   @Teclado_Table,X
   98:  }
  000b 81               RTS   
   99:  
  100:  /*
  101:  ** ===================================================================
  102:  **     Method      :  Teclado_GetVal (bean BitsIO)
  103:  **
  104:  **     Description :
  105:  **         This method returns an input value.
  106:  **           a) direction = Input  : reads the input value from the
  107:  **                                   pins and returns it
  108:  **           b) direction = Output : returns the last written value
  109:  **         Note: This bean is set to work in Input direction only.
  110:  **     Parameters  : None
  111:  **     Returns     :
  112:  **         ---        - Input value (0 to 63)
  113:  ** ===================================================================
  114:  */
  115:  /*
  116:  byte Teclado_GetVal(void)
  117:  
  118:  **  This method is implemented as a macro. See Teclado.inc file.  **
  119:  */
  120:  
  121:  /*
  122:  ** ===================================================================
  123:  **     Method      :  Teclado_GetBit (bean BitsIO)
  124:  **
  125:  **     Description :
  126:  **         This method returns the specified bit of the input value.
  127:  **           a) direction = Input  : reads the input value from pins
  128:  **                                   and returns the specified bit
  129:  **           b) direction = Output : returns the specified bit
  130:  **                                   of the last written value
  131:  **         Note: This bean is set to work in Input direction only.
  132:  **     Parameters  :
  133:  **         NAME       - DESCRIPTION
  134:  **         BitNum     - Number of the bit to read (0 to 5)
  135:  **     Returns     :
  136:  **         ---        - Value of the specified bit (FALSE or TRUE)
  137:  **                      FALSE = "0" or "Low", TRUE = "1" or "High"
  138:  ** ===================================================================
  139:  */
  140:  bool Teclado_GetBit(byte BitNum)
  141:  {

Function: Teclado_GetBit
Source  : Z:\vph1\2puertas\CON-PTT\Casa\Code\Teclado.C
Options : -Cc -Env"GENPATH=Z:\vph1\2puertas\CON-PTT\Casa;Z:\vph1\2puertas\CON-PTT\Casa\bin;Z:\vph1\2puertas\CON-PTT\Casa\cmd;*Z:\vph1\2puertas\CON-PTT\Casa\Code;Z:\vph1\2puertas\CON-PTT\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\2puertas\CON-PTT\Comun;*Z:\vph1\2puertas\CON-PTT;Z:\vph1\2puertas\CON-PTT\Casa\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\2puertas\CON-PTT\Casa\bin -EnvTEXTPATH=Z:\vph1\2puertas\CON-PTT\Casa\bin -Lasm=%n.lst -ObjN=Z:\vph1\2puertas\CON-PTT\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\Teclado.C.o -Qvtpfar -WmsgSd1106

  0000 8b               PSHH  
  142:    byte Mask=Teclado_GetMsk(BitNum);    /* Temporary variable - bit mask */
  0001 ad00             BSR   Teclado_GetMsk
  0003 95               TSX   
  0004 f7               STA   ,X
  143:  
  144:    return((Mask)?(PTA & Mask) == Mask:0); /* Return input value */
  0005 2603             BNE   LA ;abs = 000a
  0007 4f               CLRA  
  145:  }
  0008 8a               PULH  
  0009 81               RTS   
  000a          LA:     
  000a b600             LDA   _PTA
  000c f4               AND   ,X
  000d f1               CMP   ,X
  000e 2703             BEQ   L13 ;abs = 0013
  0010 4f               CLRA  
  0011 8a               PULH  
  0012 81               RTS   
  0013          L13:    
  0013 a601             LDA   #1
  0015 8a               PULH  
  0016 81               RTS   
  146:  
  147:  /*
  148:  ** ===================================================================
  149:  **     Method      :  Teclado_GetDir (bean BitsIO)
  150:  **
  151:  **     Description :
  152:  **         This method returns direction of the bean.
  153:  **     Parameters  : None
  154:  **     Returns     :
  155:  **         ---        - Direction of the bean (always FALSE, Input only)
  156:  **                      FALSE = Input, TRUE = Output
  157:  ** ===================================================================
  158:  */
  159:  /*
  160:  bool Teclado_GetDir(void)
  161:  
  162:  **  This method is implemented as a macro. See Teclado.inc file.  **
  163:  */
  164:  
  165:  /*
  166:  ** ###################################################################
  167:  **
  168:  **     This file was created by UNIS Processor Expert 02.89 for 
  169:  **     the Motorola HC08 series of microcontrollers.
  170:  **
  171:  ** ###################################################################
  172:  */
  173:  
