ANSI-C/cC++ Compiler for HC08 V-5.0.15, Apr 11 2002

    1:  /*
    2:  ** ###################################################################
    3:  **
    4:  **     Filename  : vph1.C
    5:  **
    6:  **     Project   : vph1
    7:  ** 
    8:  **     Processor : MC68HC908GP32CFB
    9:  **

Function: CBuffer::CBuffer( const CBuffer&)
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 e601             LDA   1,X
  0007 87               PSHA  
  0008 f6               LDA   ,X
  0009 87               PSHA  
  000a 95               TSX   
  000b e606             LDA   6,X
  000d 87               PSHA  
  000e ee07             LDX   7,X
  0010 9ee603           LDA   3,SP
  0013 8a               PULH  
  0014 e701             STA   1,X
  0016 86               PULA  
  0017 f7               STA   ,X
  0018 95               TSX   
  0019 e601             LDA   1,X
  001b 87               PSHA  
  001c ee02             LDX   2,X
  001e 8a               PULH  
  001f e603             LDA   3,X
  0021 ee02             LDX   2,X
  0023 9ee701           STA   1,SP
  0026 9ee606           LDA   6,SP
  0029 87               PSHA  
  002a 8a               PULH  
  002b 86               PULA  
  002c 89               PSHX  
  002d 9eee07           LDX   7,SP
  0030 e703             STA   3,X
  0032 86               PULA  
  0033 e702             STA   2,X
  0035 95               TSX   
  0036 f6               LDA   ,X
  0037 87               PSHA  
  0038 ee01             LDX   1,X
  003a 8a               PULH  
  003b e605             LDA   5,X
  003d ee04             LDX   4,X
  003f 87               PSHA  
  0040 9ee606           LDA   6,SP
  0043 87               PSHA  
  0044 8a               PULH  
  0045 86               PULA  
  0046 89               PSHX  
  0047 9eee07           LDX   7,SP
  004a e705             STA   5,X
  004c 86               PULA  
  004d e704             STA   4,X
  004f a702             AIS   #2
  0051 81               RTS   

Function: CBuffer::operator =( const CBuffer&)
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 e601             LDA   1,X
  0007 87               PSHA  
  0008 f6               LDA   ,X
  0009 95               TSX   
  000a ee05             LDX   5,X
  000c 89               PSHX  
  000d 95               TSX   
  000e ee07             LDX   7,X
  0010 8a               PULH  
  0011 87               PSHA  
  0012 9ee602           LDA   2,SP
  0015 e701             STA   1,X
  0017 86               PULA  
  0018 f7               STA   ,X
  0019 95               TSX   
  001a e601             LDA   1,X
  001c 87               PSHA  
  001d ee02             LDX   2,X
  001f 8a               PULH  
  0020 e603             LDA   3,X
  0022 ee02             LDX   2,X
  0024 9ee701           STA   1,SP
  0027 9ee606           LDA   6,SP
  002a 87               PSHA  
  002b 8a               PULH  
  002c 86               PULA  
  002d 89               PSHX  
  002e 9eee07           LDX   7,SP
  0031 e703             STA   3,X
  0033 86               PULA  
  0034 e702             STA   2,X
  0036 95               TSX   
  0037 f6               LDA   ,X
  0038 87               PSHA  
  0039 ee01             LDX   1,X
  003b 8a               PULH  
  003c e605             LDA   5,X
  003e ee04             LDX   4,X
  0040 87               PSHA  
  0041 9ee606           LDA   6,SP
  0044 87               PSHA  
  0045 8a               PULH  
  0046 86               PULA  
  0047 89               PSHX  
  0048 9eee07           LDX   7,SP
  004b e705             STA   5,X
  004d 86               PULA  
  004e e704             STA   4,X
  0050 9f               TXA   
  0051 8b               PSHH  
  0052 88               PULX  
  0053 a702             AIS   #2
  0055 81               RTS   
    1:  #include "pe_types.h"
    2:  #include "buffer.h"
    3:  
    4:  #define BUFFER_FULL	-2
    5:  #define ERROR		-1
    6:  
    7:  #define	GENERAL_RESET			0x01
    8:  #define SIGNALLING_CONTROL		0x80
    9:  #define SELCALL_SUBAUDIO_STATUS 0x81
   10:  #define	SIGNALLING_SETUP		0x82
   11:  #define CTSS_TX_FAST_RX_FREQ	0x83
   12:  #define	RX_TONE_PROGRAM			0x84
   13:  #define	DCS_BYTE3				0x85
   14:  #define	DCS_BYTE2				0x86
   15:  #define	DCS_BYTE1				0x87
   16:  #define GENERAL_CONTROL			0x88
   17:  #define	AUDIO_CONTROL			0x8A
   18:  #define GENERAL_PURPOSE_TIMER	0x8B
   19:  #define	SELCALL_TX				0x8D
   20:  #define	IRQ_MASK				0x8E
   21:  #define IRQ_FLAG				0x8F
   22:  
   23:  #define CTCSS_MODE	 			0
   24:  #define SELCALL_MODE 			1
   25:  
   26:  #define chip_select_ClrVal() (PTC &= ~64)
   27:  #define chip_select_SetVal() (PTC |= 64)
   28:  #define DataIn_GetVal() ((PTD) & 2)
   29:  
   30:  #define DETECT_MODE		0
   31:  #define	PREDICTIVE_MODE	1
   32:  #define	UNKNOWN_TONE	0x0f
   33:  
   34:  #ifdef __cplusplus
   35:  
   36:  class CFX828
   37:  {
   38:  	public:
   39:  		CFX828 ();
   40:  		~CFX828 ();
   41:  		
   42:  		void Init ();
   43:  		int  TxZVEI (const byte *);
   44:  		int	 TxZVEI (byte tono);
   45:  		bool IsTxBufferEmpty();
   46:  		void ProgramFastCTCSS (int tono);
   47:  		void CTCSS_tx_enable (unsigned char enable);
   48:  		void PutToneTable (byte pos, int tono);
   49:  		void SetDecoderBandwidth (byte width);
   50:  		void EnableToneDecoder (bool enable, bool mode);
   51:  		void EnableCTCSSDecoder (bool enable, bool mode);
   52:  		void IRQService ();
   53:  		char GetTone ();
   54:  		bool CTCSS_Detected (void);
   55:  		void SetRepeatTone (byte tono = 0xe) {_RepeatTone = tono;}

Function: CFX828::SetRepeatTone( unsigned char)
Source  : Z:\vph1\maestro\v4\Comun\fx828.h
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  0000 87               PSHA  
  0001 95               TSX   
  0002 e603             LDA   3,X
  0004 87               PSHA  
  0005 ee04             LDX   4,X
  0007 9ee602           LDA   2,SP
  000a 8a               PULH  
  000b e704             STA   4,X
  000d 8a               PULH  
  000e 81               RTS   

Function: CFX828::CFX828( const CFX828&)
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 e601             LDA   1,X
  0007 87               PSHA  
  0008 f6               LDA   ,X
  0009 87               PSHA  
  000a 95               TSX   
  000b e606             LDA   6,X
  000d 87               PSHA  
  000e ee07             LDX   7,X
  0010 9ee603           LDA   3,SP
  0013 8a               PULH  
  0014 e701             STA   1,X
  0016 86               PULA  
  0017 f7               STA   ,X
  0018 95               TSX   
  0019 e601             LDA   1,X
  001b 87               PSHA  
  001c ee02             LDX   2,X
  001e 8a               PULH  
  001f e603             LDA   3,X
  0021 ee02             LDX   2,X
  0023 9ee701           STA   1,SP
  0026 9ee606           LDA   6,SP
  0029 87               PSHA  
  002a 8a               PULH  
  002b 86               PULA  
  002c 89               PSHX  
  002d 9eee07           LDX   7,SP
  0030 e703             STA   3,X
  0032 86               PULA  
  0033 e702             STA   2,X
  0035 95               TSX   
  0036 f6               LDA   ,X
  0037 87               PSHA  
  0038 ee01             LDX   1,X
  003a 8a               PULH  
  003b e604             LDA   4,X
  003d 95               TSX   
  003e ee04             LDX   4,X
  0040 89               PSHX  
  0041 95               TSX   
  0042 ee06             LDX   6,X
  0044 8a               PULH  
  0045 e704             STA   4,X
  0047 a702             AIS   #2
  0049 81               RTS   

Function: CFX828::operator =( const CFX828&)
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 e604             LDA   4,X
  0007 95               TSX   
  0008 ee04             LDX   4,X
  000a 89               PSHX  
  000b 95               TSX   
  000c ee06             LDX   6,X
  000e 8a               PULH  
  000f e704             STA   4,X
  0011 95               TSX   
  0012 f6               LDA   ,X
  0013 87               PSHA  
  0014 ee01             LDX   1,X
  0016 8a               PULH  
  0017 e601             LDA   1,X
  0019 fe               LDX   ,X
  001a 87               PSHA  
  001b 9ee606           LDA   6,SP
  001e 87               PSHA  
  001f 8a               PULH  
  0020 86               PULA  
  0021 89               PSHX  
  0022 9eee07           LDX   7,SP
  0025 e701             STA   1,X
  0027 86               PULA  
  0028 f7               STA   ,X
  0029 95               TSX   
  002a f6               LDA   ,X
  002b 87               PSHA  
  002c ee01             LDX   1,X
  002e 8a               PULH  
  002f e603             LDA   3,X
  0031 ee02             LDX   2,X
  0033 87               PSHA  
  0034 9ee606           LDA   6,SP
  0037 87               PSHA  
  0038 8a               PULH  
  0039 86               PULA  
  003a 89               PSHX  
  003b 9eee07           LDX   7,SP
  003e e703             STA   3,X
  0040 86               PULA  
  0041 e702             STA   2,X
  0043 9f               TXA   
  0044 8b               PSHH  
  0045 88               PULX  
  0046 a702             AIS   #2
  0048 81               RTS   
   10:  **     Version   : Driver 01.00
   11:  **
   12:  **     Compiler  : Metrowerks HC08 C Compiler V-5.0.13
   13:  **
   14:  **     Date/Time : 4/17/jueves, 15:23
   15:  **
   16:  **     Abstract  :
   17:  **
   18:  **         Main module. 
   19:  **         Here is to be placed user's code.
   20:  **
   21:  **     Settings  :
   22:  **
   23:  **
   24:  **     Contents  :
   25:  **
   26:  **         No public methods
   27:  **
   28:  **
   29:  **     (c) Copyright UNIS, spol. s r.o. 1997-2002
   30:  **
   31:  **     UNIS, spol. s r.o.
   32:  **     Jundrovska 33
   33:  **     624 00 Brno
   34:  **     Czech Republic
   35:  **
   36:  **     http      : www.processorexpert.com
   37:  **     mail      : info@processorexpert.com
   38:  **
   39:  ** ###################################################################
   40:  */
   41:  /* MODULE vph1 */
   42:  
   43:  //#pragma MESSAGE DISABLE C1420 /* WARNING C1420: Result of function-call is ignored. You can uncomment this line to disable this compiler warning */
   44:  
   45:  /*Including used modules for compilling procedure*/
   46:  #include "vph1.h"
   47:  #include "Cpu.h"
   48:  #include "Events.h"
   49:  #include "IRQ.h"
   50:  /*Include shared modules, which are used for whole project*/
   51:  #include "PE_Types.h"
   52:  #include "PE_Error.h"
   53:  #include "PE_Const.h"
   54:  #include "IO_Map.h"
   55:  #include <stdio.h>
   56:  #include <ctype.h>
   57:  #include "delay.h"
   58:  #include "maincpp.h"
   59:  #include "io_map.h"
   60:  
   61:  #include "fx828.h"
   62:  
   63:  #define CTCSS_APERTURA	18
   64:  #define CTCSS_SQL		12
   65:  
   66:  #define APERTURA_PUERTA	PTC_PTC4
   67:  
   68:  #define PTT_ON			PTC_PTC2 = 0;delay_ms(100)
   69:  #define PTT_OFF			PTC_PTC2 = 1
   70:  
   71:  #define AUDIO_ENABLE	PTC_PTC5 = 0
   72:  #define AUDIO_DISABLE	PTC_PTC5 = 1
   73:  
   74:  #define SQL_ABIERTO	PTD_PTD4==0
   75:  #define SQL_CERRADO PTD_PTD4==1
   76:  
   77:  extern "C" byte Terminal_SendChar(byte Chr);
   78:  extern "C" byte TIMER_Enable(void);
   79:  extern "C" byte TIMER_Disable(void);
   80:  
   81:  const int RxCTCSSTable[47]={0x3d8,	/*67.0*/ 0x409,	/*69.3*/ 0x41b,	/*71.9*/
   82:  							0x44e,	/*74.4*/ 0x483,	/*77.0*/ 0x494,	/*79.7*/
   83:  							0x4cb,	/*82.5*/ 0x502,	/*85.4*/ 0x514,	/*88.5*/
   84:  							0x54c,	/*91.5*/ 0x587,	/*94.8*/ 0x594,	/*97.4*/
   85:  							0x5cb,	/*100.0*/0x607,	/*103.5*/0x645,	/*107.2*/
   86:  							0x682,	/*110.9*/0x6c0,	/*114.8*/0x6d1,	/*118.8*/
   87:  							0x710,	/*123.0*/0x750,	/*127.3*/0x7c0,	/*131.8*/
   88:  							0x802,	/*136.5*/0x884,	/*141.3*/0x886,	/*146.2*/
   89:  							0x8c9,	/*151.4*/0x90c,	/*156.7*/0x948,	/*159.8*/
   90:  							0x982,	/*162.2*/0x9c6,	/*167.9*/0xa0b,	/*173.8*/
   91:  							0xa84,	/*179.9*/0xac2,	/*183.5*/0xac9,	/*186.2*/
   92:  							0xb08,	/*189.9*/0xb44,	/*192.8*/0xb83,	/*196.6*/
   93:  							0xb8a,	/*199.5*/0xbc9,	/*203.5*/0xc06,	/*206.5*/
   94:  							0xc46,	/*210.7*/0xcc3,	/*218.1*/0xd41,	/*225.7*/
   95:  							0xd48,	/*229.1*/0xd89,	/*233.6*/0xe08,	/*241.8*/
   96:  							0xe88,	/*250.3*/0xec7};/*254.1*/
   97:  								 
   98:  const int RxZVEI1Table[15]={0xc44,	/*2400 0*/
   99:  							0x553,	/*1060 1*/
  100:  							0x5d2,	/*1160 2*/
  101:  							0x683,	/*1270 3*/
  102:  							0x70e,	/*1400 4*/
  103:  							0x7c8,	/*1530 5*/
  104:  							0x886,	/*1670 6*/
  105:  							0x949,	/*1830 7*/
  106:  							0xa42,	/*2000 8*/
  107:  							0xb43,	/*2200 9*/
  108:  							0xe46,	/*2800 A*/
  109:  							0x414,	/*810  B*/
  110:  							0x4d8,	/*970  C*/
  111:  							0x486,	/*885  D*/
  112:  							0xd45};	/*2600 E*/
  113:  
  114:  const int indicativo = 1;
  115:  
  116:  bool bFlag;
  117:  bool bAperPuerta;
  118:  bool bSQL;
  119:  
  120:  union 		//Indicativo recibido
  121:  {
  122:  	struct
  123:  	{
  124:  		char low	:8;
  125:  		char high	:8;
  126:  	}_byte;
  127:  	int valor;
  128:  	
  129:  }IndicRx;
  130:  
  131:  void PutString (char *string)
  132:  {

Function: PutString( unsigned char*)
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  0000 87               PSHA  
  0001 89               PSHX  
  0002 a7fe             AIS   #-2
  133:  	int n;
  134:  	for (n=0;string[n]!=0;n++)
  0004 95               TSX   
  0005 6f01             CLR   1,X
  0007 7f               CLR   ,X
  0008 200f             BRA   L19 ;abs = 0019
  000a          LA:     
  000a ad15             BSR   L21 ;abs = 0021
  135:  		while (Terminal_SendChar (string[n])==ERR_TXFULL);
  000c f6               LDA   ,X
  000d cd0000           JSR   Terminal_SendChar
  0010 410bf7           CBEQA #11,LA ;abs = 000a
  0013 95               TSX   
  0014 6c01             INC   1,X
  0016 2601             BNE   L19 ;abs = 0019
  0018 7c               INC   ,X
  0019          L19:    
  0019 ad06             BSR   L21 ;abs = 0021
  001b 7d               TST   ,X
  001c 26ec             BNE   LA ;abs = 000a
  136:  }
  001e a704             AIS   #4
  0020 81               RTS   
  0021          L21:    
  0021 95               TSX   
  0022 e605             LDA   5,X
  0024 eb03             ADD   3,X
  0026 87               PSHA  
  0027 e602             LDA   2,X
  0029 e904             ADC   4,X
  002b 87               PSHA  
  002c 8a               PULH  
  002d 88               PULX  
  002e 81               RTS   
  137:  
  138:  CFX828 FX828;
  139:  
  140:  void desconexion(void)
  141:  {

Function: desconexion( void)
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  142:  	AUDIO_DISABLE;
  0000 1a00             BSET  5,_PTC
  143:  	FX828.CTCSS_tx_enable (FALSE);		//Fin de transmisión subtono
  0002 450000           LDHX  @FX828
  0005 89               PSHX  
  0006 8b               PSHH  
  0007 4f               CLRA  
  0008 cd0000           JSR   CTCSS_tx_enable
  000b a702             AIS   #2
  144:  	FX828.EnableBPF (FALSE);			//Deshabilitamos salida de audio rx
  000d 450000           LDHX  @FX828
  0010 89               PSHX  
  0011 8b               PSHH  
  0012 4f               CLRA  
  0013 cd0000           JSR   EnableBPF
  0016 a702             AIS   #2
  145:  	PTT_OFF;
  0018 1400             BSET  2,_PTC
  146:  }
  001a 81               RTS   
  147:  
  148:  signed char teclado (void)
  149:  {

Function: teclado( void)
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  150:  	if (PTA<0x7f)	//Se detecta una pulsación
  0000 b600             LDA   _PTA
  0002 a17f             CMP   #127
  0004 2412             BCC   L18 ;abs = 0018
  151:  	{
  152:  		delay_ms (100);
  0006 a664             LDA   #100
  0008 5f               CLRX  
  0009 cd0000           JSR   delay_ms
  153:  		if (PTA<0x7f)
  000c b600             LDA   _PTA
  000e a17f             CMP   #127
  0010 2406             BCC   L18 ;abs = 0018
  154:  			return (~PTA)&0x7f;
  0012 b600             LDA   _PTA
  0014 43               COMA  
  0015 a47f             AND   #127
  0017 81               RTS   
  0018          L18:    
  155:  	}
  156:  	return -1;	//No hay ninguna tecla pulsada
  0018 a6ff             LDA   #-1
  157:  }
  001a 81               RTS   
  158:  void maincpp (void)
  159:  {	

Function: maincpp
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  0000 a7f7             AIS   #-9
  160:  	int n;
  161:  	bool bFlag;
  162:  	signed char tecla;
  163:  	char str[5];
  164:  	
  165:  	DDRA = 0;		//Porta como entradas (Teclado)
  0002 3f00             CLR   _DDRA
  166:  	DDRB = 0;
  0004 3f00             CLR   _DDRB
  167:  
  168:  	DDRC_DDRC2=TRUE;
  0006 1400             BSET  2,_DDRC
  169:  	DDRC_DDRC3=TRUE;
  0008 1600             BSET  3,_DDRC
  170:  	DDRC_DDRC4=TRUE;
  000a 1800             BSET  4,_DDRC
  171:  	DDRC_DDRC5=TRUE;
  000c 1a00             BSET  5,_DDRC
  172:  	DDRD_DDRD4=FALSE;
  000e 1900             BCLR  4,_DDRD
  173:  
  174:  	APERTURA_PUERTA = FALSE;
  0010 1900             BCLR  4,_PTC
  175:  
  176:  	bFlag=FALSE;
  0012 95               TSX   
  0013 6f02             CLR   2,X
  177:  	bAperPuerta = FALSE;
  0015 4f               CLRA  
  0016 c70000           STA   bAperPuerta
  178:  	bSQL = FALSE;
  0019 c70000           STA   bSQL
  179:  	
  180:  	EnableInterrupts;
  001c 9a               CLI   
  181:  	FX828.Init ();
  001d a600             LDA   @FX828
  001f ae00             LDX   @FX828:MSB
  0021 cd0000           JSR   Init
  0024 cd01f5           JSR   L1F5 ;abs = 01f5
  182:  
  183:  	
  184:  	FX828.Mod1Enable (TRUE,0x1f);	//Habilitamos mod1 con volumen al máximo
  185:  	FX828.Mod2Enable (FALSE,0);		//Deshabilitamos mod2
  186:  	
  187:  	//Grabamos los tonos CTCSS en la tabla  RX TONE PROGRAM TABLE
  188:  	FX828.PutToneTable (0,RxCTCSSTable[CTCSS_SQL]);		//Tono de SQL
  0027 450000           LDHX  @FX828
  002a 89               PSHX  
  002b 8b               PSHH  
  002c 4f               CLRA  
  002d 87               PSHA  
  002e a6cb             LDA   #-53
  0030 ae05             LDX   #5
  0032 cd0000           JSR   PutToneTable
  0035 a703             AIS   #3
  189:  	FX828.PutToneTable (1,RxCTCSSTable[CTCSS_APERTURA]);		//Tono de apertura de puerta
  0037 450000           LDHX  @FX828
  003a 89               PSHX  
  003b 8b               PSHH  
  003c a601             LDA   #1
  003e 87               PSHA  
  003f a610             LDA   #16
  0041 ae07             LDX   #7
  0043 cd0000           JSR   PutToneTable
  0046 a703             AIS   #3
  190:  
  191:  	FX828.SetDecoderBandwidth (0x08);			//Ponemos el ancho de banda a 1.1%
  0048 450000           LDHX  @FX828
  004b 89               PSHX  
  004c 8b               PSHH  
  004d a608             LDA   #8
  004f cd0000           JSR   SetDecoderBandwidth
  0052 a702             AIS   #2
  192:  	FX828.EnableToneDecoder (TRUE,CTCSS_MODE);	//Habilitamos el decodificador de tonos
  0054 450000           LDHX  @FX828
  0057 89               PSHX  
  0058 8b               PSHH  
  0059 5f               CLRX  
  005a a601             LDA   #1
  005c cd0000           JSR   EnableToneDecoder
  005f a702             AIS   #2
  193:  	FX828.ProgramFastCTCSS (100);				//Subtonos de 100 Hz para recibir y transmitir
  0061 450000           LDHX  @FX828
  0064 89               PSHX  
  0065 8b               PSHH  
  0066 a664             LDA   #100
  0068 5f               CLRX  
  0069 cd0000           JSR   ProgramFastCTCSS
  006c a702             AIS   #2
  194:  	
  195:  	TIMER_Enable();
  006e cd0000           JSR   TIMER_Enable
  196:  
  197:  	desconexion();
  0071 cd0000           JSR   desconexion
  0074          L74:    
  198:  
  199:  	while (TRUE)
  200:  	{
  201:  		tecla = teclado();
  0074 cd0000           JSR   teclado
  0077 95               TSX   
  0078 e703             STA   3,X
  202:  		if (tecla>-1 && !bFlag)	//Pulsan una tecla del teclado
  007a 4c               INCA  
  007b 9203             BGT   L80 ;abs = 0080
  007d cc0147           JMP   L147 ;abs = 0147
  0080          L80:    
  0080 6d02             TST   2,X
  0082 2703             BEQ   L87 ;abs = 0087
  0084 cc0149           JMP   L149 ;abs = 0149
  0087          L87:    
  203:  		{		
  204:  		
  205:  			//GENERAMOS UN TONO EN EL ALTAVOZ
  206:  			AUDIO_ENABLE;
  0087 1b00             BCLR  5,_PTC
  207:  			FX828.Mod1Enable (FALSE,0);	//Habilitamos mod1 con volumen al máximo
  0089 450000           LDHX  @FX828
  008c 89               PSHX  
  008d 8b               PSHH  
  008e 4f               CLRA  
  008f 5f               CLRX  
  0090 cd0000           JSR   Mod1Enable
  0093 a702             AIS   #2
  208:  			FX828.Mod2Enable (TRUE,0x1f);
  0095 450000           LDHX  @FX828
  0098 89               PSHX  
  0099 8b               PSHH  
  009a a601             LDA   #1
  009c ae1f             LDX   #31
  009e cd0000           JSR   Mod2Enable
  00a1 a702             AIS   #2
  209:  			FX828.ProgramZVEI (200.0);
  00a3 450000           LDHX  @FX828
  00a6 89               PSHX  
  00a7 8b               PSHH  
  00a8 4f               CLRA  
  00a9 87               PSHA  
  00aa 87               PSHA  
  00ab 454348           LDHX  #17224
  00ae 89               PSHX  
  00af 8b               PSHH  
  00b0 cd0000           JSR   ProgramZVEI
  00b3 a706             AIS   #6
  210:  			FX828.ZVEI_tx_enable(TRUE);
  00b5 450000           LDHX  @FX828
  00b8 89               PSHX  
  00b9 8b               PSHH  
  00ba a601             LDA   #1
  00bc cd0000           JSR   ZVEI_tx_enable
  00bf a702             AIS   #2
  00c1          LC1:    
  211:  			while (teclado()>-1);
  00c1 cd0000           JSR   teclado
  00c4 4c               INCA  
  00c5 92fa             BGT   LC1 ;abs = 00c1
  212:  			FX828.ZVEI_tx_enable(FALSE);
  00c7 450000           LDHX  @FX828
  00ca 89               PSHX  
  00cb 8b               PSHH  
  00cc 4f               CLRA  
  00cd cd0000           JSR   ZVEI_tx_enable
  00d0 a702             AIS   #2
  213:  			AUDIO_DISABLE;
  00d2 1a00             BSET  5,_PTC
  00d4 cd01f5           JSR   L1F5 ;abs = 01f5
  214:  			FX828.Mod1Enable (TRUE,0x1f);	//Habilitamos mod1 con volumen al máximo
  215:  			FX828.Mod2Enable (FALSE,0);		//Deshabilitamos mod2
  216:  			
  217:  			PTT_ON;
  00d7 1500             BCLR  2,_PTC
  00d9 cd0237           JSR   L237 ;abs = 0237
  00dc cd023d           JSR   L23D ;abs = 023d
  218:  			//Componemos el código ZVEI
  219:  				
  220:  			//Transmitimos:
  221:  			//
  222:  			// --- --- --- --- ---
  223:  			//| B | C | C | C | C |
  224:  			// --- --- --- --- ---
  225:  			//
  226:  			// B = Inicio de trama (B)
  227:  			// C = Indicativo (3 dígitos)
  228:  			
  229:  			sprintf (str,"%04d",tecla);
  00df 89               PSHX  
  00e0 87               PSHA  
  00e1 450000           LDHX  @"%04d"
  00e4 89               PSHX  
  00e5 8b               PSHH  
  00e6 95               TSX   
  00e7 af08             AIX   #8
  00e9 89               PSHX  
  00ea 8b               PSHH  
  00eb cd0000           JSR   sprintf
  00ee a706             AIS   #6
  230:  			delay_ms(500);
  00f0 a6f4             LDA   #-12
  00f2 ae01             LDX   #1
  00f4 cd0000           JSR   delay_ms
  00f7 cd022a           JSR   L22A ;abs = 022a
  231:  			FX828.CTCSS_tx_enable (TRUE);
  232:  			DisableInterrupts;
  00fa 9b               SEI   
  00fb cd0210           JSR   L210 ;abs = 0210
  233:  			FX828.TxZVEI (0x0b);
  234:  			FX828.TxZVEI (str);
  00fe 89               PSHX  
  00ff 8b               PSHH  
  0100 95               TSX   
  0101 af06             AIX   #6
  0103 9f               TXA   
  0104 8b               PSHH  
  0105 88               PULX  
  0106 cd0000           JSR   TxZVEI
  0109 a702             AIS   #2
  235:  			EnableInterrupts;
  010b 9a               CLI   
  010c cd023d           JSR   L23D ;abs = 023d
  236:  			sprintf (str,"%04d",tecla);		
  010f 89               PSHX  
  0110 87               PSHA  
  0111 450000           LDHX  @"%04d"
  0114 89               PSHX  
  0115 8b               PSHH  
  0116 95               TSX   
  0117 af08             AIX   #8
  0119 89               PSHX  
  011a 8b               PSHH  
  011b cd0000           JSR   sprintf
  011e a706             AIS   #6
  237:  			delay_ms(510);
  0120 a6fe             LDA   #-2
  0122 ae01             LDX   #1
  0124 cd0000           JSR   delay_ms
  238:  			DisableInterrupts;
  0127 9b               SEI   
  0128 cd0210           JSR   L210 ;abs = 0210
  239:  			FX828.TxZVEI (0x0b);
  240:  			FX828.TxZVEI (str);
  012b 89               PSHX  
  012c 8b               PSHH  
  012d 95               TSX   
  012e af06             AIX   #6
  0130 9f               TXA   
  0131 8b               PSHH  
  0132 88               PULX  
  0133 cd0000           JSR   TxZVEI
  0136 a702             AIS   #2
  241:  			EnableInterrupts;
  0138 9a               CLI   
  242:  			delay_ms(500);
  0139 a6f4             LDA   #-12
  013b ae01             LDX   #1
  013d cd0000           JSR   delay_ms
  243:  			desconexion();
  0140 cd0000           JSR   desconexion
  0143          L143:   
  244:  			while (teclado()>-1);
  0143 cd0000           JSR   teclado
  0146 4c               INCA  
  0147          L147:   
  0147 92fa             BGT   L143 ;abs = 0143
  0149          L149:   
  245:  		}
  246:  	
  247:  		if (bAperPuerta==TRUE)
  0149 c60000           LDA   bAperPuerta
  014c 4b28             DBNZA L176 ;abs = 0176
  248:  		{
  249:  			for (n=0;n<50 && bAperPuerta;n++) delay_ms(1);
  014e 95               TSX   
  014f 6f01             CLR   1,X
  0151 7f               CLR   ,X
  0152 2007             BRA   L15B ;abs = 015b
  0154          L154:   
  0154 cd0220           JSR   L220 ;abs = 0220
  0157 95               TSX   
  0158 2601             BNE   L15B ;abs = 015b
  015a 7c               INC   ,X
  015b          L15B:   
  015b cd0247           JSR   L247 ;abs = 0247
  015e 9005             BGE   L165 ;abs = 0165
  0160 c60000           LDA   bAperPuerta
  0163 26ef             BNE   L154 ;abs = 0154
  0165          L165:   
  250:  			if (n>=49)
  0165 650031           CPHX  #49
  0168 910c             BLT   L176 ;abs = 0176
  251:  			{
  252:  				APERTURA_PUERTA=TRUE;
  016a 1800             BSET  4,_PTC
  016c cd0237           JSR   L237 ;abs = 0237
  016f          L16F:   
  253:  				delay_ms(100);
  254:  				while (bAperPuerta)	//Mientras esté el subotono de apertura
  016f c60000           LDA   bAperPuerta
  0172 26fb             BNE   L16F ;abs = 016f
  255:  				{
  256:  					if (!bAperPuerta)	//Nos aseguramos de que realmente ya no hay subtono
  257:  						for (int i=0;i<500 && !bAperPuerta;i++) delay_ms(1);
  258:  				}
  259:  				APERTURA_PUERTA=FALSE;
  0174 1900             BCLR  4,_PTC
  0176          L176:   
  260:  			}
  261:  		}
  262:  		
  263:  		if (bSQL && !bFlag)	//Nos llaman
  0176 c60000           LDA   bSQL
  0179 273b             BEQ   L1B6 ;abs = 01b6
  017b 95               TSX   
  017c 6d02             TST   2,X
  017e 2636             BNE   L1B6 ;abs = 01b6
  264:  		{
  265:  			for (n=0;n<50 && bSQL;n++) delay_ms(1);
  0180 6f01             CLR   1,X
  0182 7f               CLR   ,X
  0183 2007             BRA   L18C ;abs = 018c
  0185          L185:   
  0185 cd0220           JSR   L220 ;abs = 0220
  0188 95               TSX   
  0189 2601             BNE   L18C ;abs = 018c
  018b 7c               INC   ,X
  018c          L18C:   
  018c cd0247           JSR   L247 ;abs = 0247
  018f 9005             BGE   L196 ;abs = 0196
  0191 c60000           LDA   bSQL
  0194 26ef             BNE   L185 ;abs = 0185
  0196          L196:   
  266:  			if (n>=49)
  0196 650031           CPHX  #49
  0199 911b             BLT   L1B6 ;abs = 01b6
  267:  			{
  268:  				PTT_ON;
  019b 1500             BCLR  2,_PTC
  019d cd0237           JSR   L237 ;abs = 0237
  269:  				AUDIO_ENABLE;
  01a0 1b00             BCLR  5,_PTC
  01a2 cd022a           JSR   L22A ;abs = 022a
  270:  				FX828.CTCSS_tx_enable (TRUE);//Transmitimos subtono
  271:  				FX828.EnableBPF (TRUE);		 //Habilitamos salida de audio rx
  01a5 450000           LDHX  @FX828
  01a8 89               PSHX  
  01a9 8b               PSHH  
  01aa a601             LDA   #1
  01ac cd0000           JSR   EnableBPF
  01af a702             AIS   #2
  272:  				bFlag = TRUE;
  01b1 a601             LDA   #1
  01b3 95               TSX   
  01b4 e702             STA   2,X
  01b6          L1B6:   
  273:  			}
  274:  		}
  275:  		
  276:  		if (!bSQL && bFlag)	//Perdemos subtono
  01b6 c60000           LDA   bSQL
  01b9 2637             BNE   L1F2 ;abs = 01f2
  01bb 95               TSX   
  01bc 6d02             TST   2,X
  01be 2732             BEQ   L1F2 ;abs = 01f2
  277:  		{
  278:  			AUDIO_DISABLE;
  01c0 1a00             BSET  5,_PTC
  279:  			if (bFlag == TRUE)
  01c2 e602             LDA   2,X
  01c4 4b2c             DBNZA L1F2 ;abs = 01f2
  280:  			{
  281:  				for (n=0;n<500 && (!bSQL && !bAperPuerta);n++) delay_ms(1);
  01c6 6f01             CLR   1,X
  01c8 7f               CLR   ,X
  01c9 2006             BRA   L1D1 ;abs = 01d1
  01cb          L1CB:   
  01cb ad53             BSR   L220 ;abs = 0220
  01cd 95               TSX   
  01ce 2601             BNE   L1D1 ;abs = 01d1
  01d0 7c               INC   ,X
  01d1          L1D1:   
  01d1 95               TSX   
  01d2 f6               LDA   ,X
  01d3 87               PSHA  
  01d4 ee01             LDX   1,X
  01d6 8a               PULH  
  01d7 6501f4           CPHX  #500
  01da 9008             BGE   L1E4 ;abs = 01e4
  01dc c60000           LDA   bSQL
  01df ca0000           ORA   bAperPuerta
  01e2 27e7             BEQ   L1CB ;abs = 01cb
  01e4          L1E4:   
  282:  				if (n>=499)
  01e4 6501f3           CPHX  #499
  01e7 9107             BLT   L1F0 ;abs = 01f0
  283:  				{
  284:  					desconexion();
  01e9 cd0000           JSR   desconexion
  285:  					bFlag = FALSE;				
  01ec 95               TSX   
  01ed 6f02             CLR   2,X
  286:  				}
  01ef 65               SKIP2 L1F2 ;abs = 01f2
  01f0          L1F0:   
  287:  				else	
  288:  					AUDIO_ENABLE;
  01f0 1b00             BCLR  5,_PTC
  01f2          L1F2:   
  01f2 cc0074           JMP   L74 ;abs = 0074
  01f5          L1F5:   
  01f5 450000           LDHX  @FX828
  01f8 89               PSHX  
  01f9 8b               PSHH  
  01fa a601             LDA   #1
  01fc ae1f             LDX   #31
  01fe cd0000           JSR   Mod1Enable
  0201 a702             AIS   #2
  0203 450000           LDHX  @FX828
  0206 89               PSHX  
  0207 8b               PSHH  
  0208 4f               CLRA  
  0209 5f               CLRX  
  020a cd0000           JSR   Mod2Enable
  020d a702             AIS   #2
  020f 81               RTS   
  0210          L210:   
  0210 450000           LDHX  @FX828
  0213 89               PSHX  
  0214 8b               PSHH  
  0215 a60b             LDA   #11
  0217 cd0000           JSR   TxZVEI
  021a a702             AIS   #2
  021c 450000           LDHX  @FX828
  021f 81               RTS   
  0220          L220:   
  0220 a601             LDA   #1
  0222 5f               CLRX  
  0223 cd0000           JSR   delay_ms
  0226 95               TSX   
  0227 6c03             INC   3,X
  0229 81               RTS   
  022a          L22A:   
  022a 450000           LDHX  @FX828
  022d 89               PSHX  
  022e 8b               PSHH  
  022f a601             LDA   #1
  0231 cd0000           JSR   CTCSS_tx_enable
  0234 a702             AIS   #2
  0236 81               RTS   
  0237          L237:   
  0237 a664             LDA   #100
  0239 5f               CLRX  
  023a cc0000           JMP   delay_ms
  023d          L23D:   
  023d 95               TSX   
  023e e605             LDA   5,X
  0240 48               LSLA  
  0241 4f               CLRA  
  0242 a200             SBC   #0
  0244 ee05             LDX   5,X
  0246 81               RTS   
  0247          L247:   
  0247 95               TSX   
  0248 e602             LDA   2,X
  024a 87               PSHA  
  024b ee03             LDX   3,X
  024d 8a               PULH  
  024e 650032           CPHX  #50
  0251 81               RTS   
  289:  			}
  290:  		}
  291:  	}
  292:  }
  293:  
  294:  #ifdef __cplusplu
  295:  	extern "C"
  296:  #endif
  297:  
  298:  void MainIRQ ()
  299:  {

Function: MainIRQ
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  300:  	byte tono;
  301:  	FX828.IRQService();
  0000 a600             LDA   @FX828
  0002 ae00             LDX   @FX828:MSB
  0004 cd0000           JSR   IRQService
  302:  	tono = FX828.GetTone();
  0007 a600             LDA   @FX828
  0009 ae00             LDX   @FX828:MSB
  000b cd0000           JSR   GetTone
  303:  
  304:  	switch (tono)
  000e 4d               TSTA  
  000f 270b             BEQ   L1C ;abs = 001c
  0011 41010e           CBEQA #1,L22 ;abs = 0022
  305:  	{
  306:  		case 0:
  307:  			bSQL = TRUE;
  308:  			bAperPuerta = FALSE;
  309:  		break;
  310:  		
  311:  		case 1:
  312:  			bAperPuerta = TRUE;
  313:  		break;
  314:  
  315:  		default:
  316:  			bAperPuerta = FALSE;
  0014 4f               CLRA  
  0015 c70000           STA   bAperPuerta
  317:  			bSQL = FALSE;
  0018 c70000           STA   bSQL
  318:  		break;
  001b 81               RTS   
  001c          L1C:    
  001c a601             LDA   #1
  001e c70000           STA   bSQL
  0021 4f               CLRA  
  0022          L22:    
  0022 c70000           STA   bAperPuerta
  319:  	
  320:  	}
  321:  }
  0025 81               RTS   

Function: __ConstructorInit__
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 a600             LDA   @FX828
  0002 ae00             LDX   @FX828:MSB
  0004 cc0000           JMP   CONSTRUCTOR

Function: __DestructorInit__
Source  : Z:\vph1\maestro\v4\Calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v4\Calle;Z:\vph1\maestro\v4\Calle\bin;Z:\vph1\maestro\v4\Calle\cmd;*Z:\vph1\maestro\v4\Calle\Code;Z:\vph1\maestro\v4\Calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v4\Comun;*Z:\vph1\maestro\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v4\Calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v4\Calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v4\Calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 a600             LDA   @FX828
  0002 ae00             LDX   @FX828:MSB
  0004 cc0000           JMP   DESTRUCTOR
  322:  
  323:  /* END vph1 */
  324:  /*
  325:  ** ###################################################################
  326:  **
  327:  **     This file was created by UNIS Processor Expert 02.89 for 
  328:  **     the Motorola HC08 series of microcontrollers.
  329:  **
  330:  ** ###################################################################
  331:  */
  332:  
