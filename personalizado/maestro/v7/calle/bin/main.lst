ANSI-C/cC++ Compiler for HC08 V-5.0.17, Apr 22 2003

    1:  /*
    2:  ** ###################################################################
    3:  **
    4:  **     Filename  : vph1.C
    5:  **
    6:  **     Project   : vph1
    7:  ** 
    8:  **     Processor : MC68HC908GP32CFB
    9:  **

Function: CBuffer::CBuffer( const CBuffer&)
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 f6               LDA   ,X
  0006 87               PSHA  
  0007 95               TSX   
  0008 e605             LDA   5,X
  000a 87               PSHA  
  000b ee06             LDX   6,X
  000d 8a               PULH  
  000e 86               PULA  
  000f f7               STA   ,X
  0010 ad32             BSR   L44 ;abs = 0044
  0012 e601             LDA   1,X
  0014 ad25             BSR   L3B ;abs = 003b
  0016 e701             STA   1,X
  0018 ad2a             BSR   L44 ;abs = 0044
  001a e602             LDA   2,X
  001c ad1d             BSR   L3B ;abs = 003b
  001e e702             STA   2,X
  0020 ad22             BSR   L44 ;abs = 0044
  0022 e603             LDA   3,X
  0024 ad15             BSR   L3B ;abs = 003b
  0026 e703             STA   3,X
  0028 ad1a             BSR   L44 ;abs = 0044
  002a e604             LDA   4,X
  002c ad0d             BSR   L3B ;abs = 003b
  002e e704             STA   4,X
  0030 ad12             BSR   L44 ;abs = 0044
  0032 e605             LDA   5,X
  0034 ad05             BSR   L3B ;abs = 003b
  0036 e705             STA   5,X
  0038 a702             AIS   #2
  003a 81               RTS   
  003b          L3B:    
  003b 95               TSX   
  003c ee06             LDX   6,X
  003e 89               PSHX  
  003f 95               TSX   
  0040 ee08             LDX   8,X
  0042 8a               PULH  
  0043 81               RTS   
  0044          L44:    
  0044 95               TSX   
  0045 e602             LDA   2,X
  0047 87               PSHA  
  0048 ee03             LDX   3,X
  004a 8a               PULH  
  004b 81               RTS   

Function: CBuffer::operator =( const CBuffer&)
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 f6               LDA   ,X
  0006 ad2f             BSR   L37 ;abs = 0037
  0008 f7               STA   ,X
  0009 ad35             BSR   L40 ;abs = 0040
  000b e601             LDA   1,X
  000d ad28             BSR   L37 ;abs = 0037
  000f e701             STA   1,X
  0011 ad2d             BSR   L40 ;abs = 0040
  0013 e602             LDA   2,X
  0015 ad20             BSR   L37 ;abs = 0037
  0017 e702             STA   2,X
  0019 ad25             BSR   L40 ;abs = 0040
  001b e603             LDA   3,X
  001d ad18             BSR   L37 ;abs = 0037
  001f e703             STA   3,X
  0021 ad1d             BSR   L40 ;abs = 0040
  0023 e604             LDA   4,X
  0025 ad10             BSR   L37 ;abs = 0037
  0027 e704             STA   4,X
  0029 ad15             BSR   L40 ;abs = 0040
  002b e605             LDA   5,X
  002d ad08             BSR   L37 ;abs = 0037
  002f e705             STA   5,X
  0031 9f               TXA   
  0032 8b               PSHH  
  0033 88               PULX  
  0034 a702             AIS   #2
  0036 81               RTS   
  0037          L37:    
  0037 95               TSX   
  0038 ee06             LDX   6,X
  003a 89               PSHX  
  003b 95               TSX   
  003c ee08             LDX   8,X
  003e 8a               PULH  
  003f 81               RTS   
  0040          L40:    
  0040 95               TSX   
  0041 e602             LDA   2,X
  0043 87               PSHA  
  0044 ee03             LDX   3,X
  0046 8a               PULH  
  0047 81               RTS   
    1:  #include <ctype.h>
    2:  #include "buffer.h"
    3:  
    4:  #define BUFFER_FULL	-2
    5:  #define ERROR		-1
    6:  
    7:  #define	GENERAL_RESET			0x01
    8:  #define SIGNALLING_CONTROL		0x80
    9:  #define SELCALL_SUBAUDIO_STATUS 0x81
   10:  #define	SIGNALLING_SETUP		0x82
   11:  #define CTSS_TX_FAST_RX_FREQ	0x83
   12:  #define	RX_TONE_PROGRAM			0x84
   13:  #define	DCSbyte3				0x85
   14:  #define	DCSbyte2				0x86
   15:  #define	DCSbyte1				0x87
   16:  #define GENERAL_CONTROL			0x88
   17:  #define	AUDIO_CONTROL			0x8A
   18:  #define GENERAL_PURPOSE_TIMER	0x8B
   19:  #define	SELCALL_TX				0x8D
   20:  #define	IRQ_MASK				0x8E
   21:  #define IRQ_FLAG				0x8F
   22:  
   23:  #define CTCSS_MODE	 			0
   24:  #define SELCALL_MODE 			1
   25:  
   26:  #define chip_select_ClrVal() (PTC &= ~64)
   27:  #define chip_select_SetVal() (PTC |= 64)
   28:  #define DataIn_GetVal() ((PTD) & 2)
   29:  
   30:  #define DETECT_MODE		0
   31:  #define	PREDICTIVE_MODE	1
   32:  #define	UNKNOWN_TONE	0x0f
   33:  
   34:  #ifdef __cplusplus
   35:  
   36:  class CFX828
   37:  {
   38:  	public:
   39:  		CFX828 ();
   40:  		~CFX828 ();
   41:  		
   42:  		void Init ();
   43:  		int  TxZVEI (const unsigned char *);
   44:  		int	 TxZVEI (const unsigned char tono);
   45:  		BOOL IsTxBufferEmpty();
   46:  		void ProgramFastCTCSS (float tono);
   47:  		void CTCSS_tx_enable (unsigned char enable);
   48:  		void PutToneTable (unsigned char pos, int tono);
   49:  		void SetDecoderBandwidth (unsigned char width);
   50:  		void EnableToneDecoder (BOOL enable, BOOL mode);
   51:  		void EnableCTCSSDecoder (BOOL enable, BOOL mode);
   52:  		void IRQService ();
   53:  		char GetTone ();
   54:  		BOOL CTCSS_Detected (void);
   55:  		void SetRepeatTone (unsigned char tono = 0xe) {_RepeatTone = tono;}

Function: CFX828::SetRepeatTone( unsigned char)
Source  : Z:\vph1\maestro\v7\Comun\fx828.h
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  0000 87               PSHA  
  0001 95               TSX   
  0002 e603             LDA   3,X
  0004 87               PSHA  
  0005 ee04             LDX   4,X
  0007 9ee602           LDA   2,SP
  000a 8a               PULH  
  000b e704             STA   4,X
  000d 8a               PULH  
  000e 81               RTS   

Function: CFX828::CFX828( const CFX828&)
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 f6               LDA   ,X
  0006 87               PSHA  
  0007 95               TSX   
  0008 e605             LDA   5,X
  000a 87               PSHA  
  000b ee06             LDX   6,X
  000d 8a               PULH  
  000e 86               PULA  
  000f f7               STA   ,X
  0010 ad2a             BSR   L3C ;abs = 003c
  0012 e601             LDA   1,X
  0014 ad1d             BSR   L33 ;abs = 0033
  0016 e701             STA   1,X
  0018 ad22             BSR   L3C ;abs = 003c
  001a e602             LDA   2,X
  001c ad15             BSR   L33 ;abs = 0033
  001e e702             STA   2,X
  0020 ad1a             BSR   L3C ;abs = 003c
  0022 e603             LDA   3,X
  0024 ad0d             BSR   L33 ;abs = 0033
  0026 e703             STA   3,X
  0028 ad12             BSR   L3C ;abs = 003c
  002a e604             LDA   4,X
  002c ad05             BSR   L33 ;abs = 0033
  002e e704             STA   4,X
  0030 a702             AIS   #2
  0032 81               RTS   
  0033          L33:    
  0033 95               TSX   
  0034 ee06             LDX   6,X
  0036 89               PSHX  
  0037 95               TSX   
  0038 ee08             LDX   8,X
  003a 8a               PULH  
  003b 81               RTS   
  003c          L3C:    
  003c 95               TSX   
  003d e602             LDA   2,X
  003f 87               PSHA  
  0040 ee03             LDX   3,X
  0042 8a               PULH  
  0043 81               RTS   

Function: CFX828::operator =( const CFX828&)
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 f6               LDA   ,X
  0006 ad27             BSR   L2F ;abs = 002f
  0008 f7               STA   ,X
  0009 ad2d             BSR   L38 ;abs = 0038
  000b e601             LDA   1,X
  000d ad20             BSR   L2F ;abs = 002f
  000f e701             STA   1,X
  0011 ad25             BSR   L38 ;abs = 0038
  0013 e602             LDA   2,X
  0015 ad18             BSR   L2F ;abs = 002f
  0017 e702             STA   2,X
  0019 ad1d             BSR   L38 ;abs = 0038
  001b e603             LDA   3,X
  001d ad10             BSR   L2F ;abs = 002f
  001f e703             STA   3,X
  0021 ad15             BSR   L38 ;abs = 0038
  0023 e604             LDA   4,X
  0025 ad08             BSR   L2F ;abs = 002f
  0027 e704             STA   4,X
  0029 9f               TXA   
  002a 8b               PSHH  
  002b 88               PULX  
  002c a702             AIS   #2
  002e 81               RTS   
  002f          L2F:    
  002f 95               TSX   
  0030 ee06             LDX   6,X
  0032 89               PSHX  
  0033 95               TSX   
  0034 ee08             LDX   8,X
  0036 8a               PULH  
  0037 81               RTS   
  0038          L38:    
  0038 95               TSX   
  0039 e602             LDA   2,X
  003b 87               PSHA  
  003c ee03             LDX   3,X
  003e 8a               PULH  
  003f 81               RTS   
   10:  **     Version   : Driver 01.00
   11:  **
   12:  **     Compiler  : Metrowerks HC08 C Compiler V-5.0.13
   13:  **
   14:  **     Date/Time : 4/17/jueves, 15:23
   15:  **
   16:  **     Abstract  :
   17:  **
   18:  **         Main module. 
   19:  **         Here is to be placed user's code.
   20:  **
   21:  **     Settings  :
   22:  **
   23:  **
   24:  **     Contents  :
   25:  **
   26:  **         No public methods
   27:  **
   28:  **
   29:  **     (c) Copyright UNIS, spol. s r.o. 1997-2002
   30:  **
   31:  **     UNIS, spol. s r.o.
   32:  **     Jundrovska 33
   33:  **     624 00 Brno
   34:  **     Czech Republic
   35:  **
   36:  **     http      : www.processorexpert.com
   37:  **     mail      : info@processorexpert.com
   38:  **
   39:  ** ###################################################################
   40:  */
   41:  /* MODULE vph1 */
   42:  
   43:  //#pragma MESSAGE DISABLE C1420 /* WARNING C1420: Result of function-call is ignored. You can uncomment this line to disable this compiler warning */
   44:  
   45:  /*Including used modules for compilling procedure*/
   46:  #include "vph1.h"
   47:  #include "Cpu.h"
   48:  #include "Events.h"
   49:  #include "IRQ.h"
   50:  /*Include shared modules, which are used for whole project*/
   51:  #include "PE_Types.h"
   52:  #include "PE_Error.h"
   53:  #include "PE_Const.h"
   54:  #include "IO_Map.h"
   55:  #include <stdio.h>
   56:  #include <ctype.h>
   57:  #include "delay.h"
   58:  #include "maincpp.h"
   59:  #include "io_map.h"
   60:  
   61:  #include "fx828.h"
   62:  
   63:  #define CTCSS_SQL		12
   64:  
   65:  #define APERTURA_PUERTA1	PTC_PTC4
   66:  #define APERTURA_PUERTA2	PTB_PTB6
   67:  #define APERTURA_PUERTA3	PTB_PTB5
   68:  #define APERTURA_PUERTA4	PTB_PTB4
   69:  
   70:  #define PTT_ON			PTC_PTC2 = 0;delay_ms(100)
   71:  #define PTT_OFF			PTC_PTC2 = 1
   72:  
   73:  #define PTT_IN		  PTA_PTA6
   74:  
   75:  #define AUDIO_ENABLE	PTC_PTC5 = 0
   76:  #define AUDIO_DISABLE	PTC_PTC5 = 1
   77:  
   78:  #define INDICATIVO	(((~PTD)&0x7f)>>4)+1
   79:  
   80:  extern "C" byte Terminal_SendChar(byte Chr);
   81:  extern "C" byte TIMER_Enable(void);
   82:  extern "C" byte TIMER_Disable(void);
   83:  
   84:  
   85:  const float FastCTCSSTable[47]=
   86:  {
   87:  		67.0,  /* Acceso 1 SUBTONO COMUNICACION*/ 	
   88:  		69.3,  /* Acceso 1 Abrir puerta 1*/ 
   89:  		71.9,  /* Acceso 1 Abrir puerta 2*/
   90:  		74.4,  /* Acceso 1 Abrir puerta 3*/ 
   91:  		77.0,  /* Acceso 1 Abrir puerta 4*/ 
   92:  
   93:  		79.7,  /* Acceso 2 SUBTONO COMUNICACION*/ 	
   94:  		82.5,  /* Acceso 2 Abrir puerta 1*/ 
   95:  		85.4,  /* Acceso 2 Abrir puerta 2*/ 
   96:  		88.5,  /* Acceso 2 Abrir puerta 3*/ 
   97:  		91.5,  /* Acceso 2 Abrir puerta 4*/   
   98:  
   99:  		94.8,  /* Acceso 3 SUBTONO COMUNICACION*/ 	 
  100:  		97.4,  /* Acceso 3 Abrir puerta 1*/   
  101:  		100.0,  /* Acceso 3 Abrir puerta 2*/   
  102:  		103.5, /* Acceso 3 Abrir puerta 3*/   
  103:  		107.2, /* Acceso 3 Abrir puerta 4*/   
  104:  
  105:  		110.9, /* Acceso 4 SUBTONO COMUNICACION*/ 	 
  106:  		114.8, /* Acceso 4 Abrir puerta 1*/   
  107:  		118.8, /* Acceso 4 Abrir puerta 2*/   
  108:  		123.0, /* Acceso 4 Abrir puerta 3*/   
  109:  		127.3, /* Acceso 4 Abrir puerta 4*/   
  110:  
  111:  		131.8, /* Acceso 5 SUBTONO COMUNICACION*/ 	 
  112:  		136.5, /* Acceso 5 Abrir puerta 1*/   
  113:  		141.3, /* Acceso 5 Abrir puerta 2*/   
  114:  		146.2, /* Acceso 5 Abrir puerta 3*/   
  115:  		151.4, /* Acceso 5 Abrir puerta 4*/   
  116:  
  117:  		156.7, /* Acceso 6 SUBTONO COMUNICACION*/ 	 
  118:  		159.8, /* Acceso 6 Abrir puerta 1*/   
  119:  		162.2, /* Acceso 6 Abrir puerta 2*/   
  120:  		167.9, /* Acceso 6 Abrir puerta 3*/   
  121:  		173.8, /* Acceso 6 Abrir puerta 4*/   
  122:  
  123:  		179.9, /* Acceso 7 SUBTONO COMUNICACION*/ 	 
  124:  		183.5, /* Acceso 7 Abrir puerta 1*/   
  125:  		186.2, /* Acceso 7 Abrir puerta 2*/   
  126:  		189.9, /* Acceso 7 Abrir puerta 3*/   
  127:  		192.8, /* Acceso 7 Abrir puerta 4*/   
  128:  
  129:  		196.6, /* Acceso 8 SUBTONO COMUNICACION*/ 	 
  130:  		199.5, /* Acceso 8 Abrir puerta 1*/   
  131:  		203.5, /* Acceso 8 Abrir puerta 2*/   
  132:  		206.5, /* Acceso 8 Abrir puerta 3*/   
  133:  		210.7, /* Acceso 8 Abrir puerta 4*/   
  134:  
  135:  		218.1, /* Acceso 9 SUBTONO COMUNICACION*/ 	 
  136:  		225.7, /* Acceso 9 Abrir puerta 1*/   
  137:  		229.1, /* Acceso 9 Abrir puerta 2*/   
  138:  		233.6, /* Acceso 9 Abrir puerta 3*/   
  139:  		241.8, /* Acceso 9 Abrir puerta 4*/   
  140:  		250.3,
  141:  		254.1};
  142:  
  143:  
  144:  const int RxCTCSSTable[47]={
  145:  					  	0x3d8,	/*67.0  Acceso 1 SUBTONO COMUNICACION*/ 	
  146:  					  	0x409,	/*69.3  Acceso 1 Abrir puerta 1*/ 
  147:  					  	0x41b,	/*71.9  Acceso 1 Abrir puerta 2*/
  148:  							0x44e,	/*74.4  Acceso 1 Abrir puerta 3*/ 
  149:  							0x483,	/*77.0  Acceso 1 Abrir puerta 4*/ 
  150:  							
  151:  							0x494,	/*79.7  Acceso 2 SUBTONO COMUNICACION*/ 	
  152:  							0x4cb,	/*82.5  Acceso 2 Abrir puerta 1*/ 
  153:  							0x502,	/*85.4  Acceso 2 Abrir puerta 2*/ 
  154:  							0x514,	/*88.5  Acceso 2 Abrir puerta 3*/ 
  155:  							0x54c,	/*91.5  Acceso 2 Abrir puerta 4*/   
  156:  							
  157:  							0x587,	/*94.8  Acceso 3 SUBTONO COMUNICACION*/ 	 
  158:  							0x594,	/*97.4  Acceso 3 Abrir puerta 1*/   
  159:  							0x5cb,	/*100.  Acceso 3 Abrir puerta 2*/   
  160:  							0x607,	/*103.5 Acceso 3 Abrir puerta 3*/   
  161:  							0x645,	/*107.2 Acceso 3 Abrir puerta 4*/   
  162:  							
  163:  							0x682,	/*110.9 Acceso 4 SUBTONO COMUNICACION*/ 	 
  164:  							0x6c0,	/*114.8 Acceso 4 Abrir puerta 1*/   
  165:  							0x6d1,	/*118.8 Acceso 4 Abrir puerta 2*/   
  166:  							0x710,	/*123.0 Acceso 4 Abrir puerta 3*/   
  167:  							0x750,	/*127.3 Acceso 4 Abrir puerta 4*/   
  168:  							
  169:  							0x7c0,	/*131.8 Acceso 5 SUBTONO COMUNICACION*/ 	 
  170:  							0x802,	/*136.5 Acceso 5 Abrir puerta 1*/   
  171:  							0x884,	/*141.3 Acceso 5 Abrir puerta 2*/   
  172:  							0x886,	/*146.2 Acceso 5 Abrir puerta 3*/   
  173:  							0x8c9,	/*151.4 Acceso 5 Abrir puerta 4*/   
  174:  							
  175:  							0x90c,	/*156.7 Acceso 6 SUBTONO COMUNICACION*/ 	 
  176:  							0x948,	/*159.8 Acceso 6 Abrir puerta 1*/   
  177:  							0x982,	/*162.2 Acceso 6 Abrir puerta 2*/   
  178:  							0x9c6,	/*167.9 Acceso 6 Abrir puerta 3*/   
  179:  							0xa0b,	/*173.8 Acceso 6 Abrir puerta 4*/   
  180:  							
  181:  							0xa84,	/*179.9 Acceso 7 SUBTONO COMUNICACION*/ 	 
  182:  							0xac2,	/*183.5 Acceso 7 Abrir puerta 1*/   
  183:  							0xac9,	/*186.2 Acceso 7 Abrir puerta 2*/   
  184:  							0xb08,	/*189.9 Acceso 7 Abrir puerta 3*/   
  185:  							0xb44,	/*192.8 Acceso 7 Abrir puerta 4*/   
  186:  							
  187:  							0xb83,	/*196.6 Acceso 8 SUBTONO COMUNICACION*/ 	 
  188:  							0xb8a,	/*199.5 Acceso 8 Abrir puerta 1*/   
  189:  							0xbc9,	/*203.5 Acceso 8 Abrir puerta 2*/   
  190:  							0xc06,	/*206.5 Acceso 8 Abrir puerta 3*/   
  191:  							0xc46,	/*210.7 Acceso 8 Abrir puerta 4*/   
  192:  							
  193:  							0xcc3,	/*218.1 Acceso 9 SUBTONO COMUNICACION*/ 	 
  194:  							0xd41,	/*225.7 Acceso 9 Abrir puerta 1*/   
  195:  							0xd48,	/*229.1 Acceso 9 Abrir puerta 2*/   
  196:  							0xd89,	/*233.6 Acceso 9 Abrir puerta 3*/   
  197:  							0xe08,	/*241.8 Acceso 9 Abrir puerta 4*/   
  198:  							0xe88,	/*250.3*/
  199:  							0xec7};/*254.1*/
  200:  								 
  201:  const int RxZVEI1Table[15]={0xc44,	/*2400 0*/
  202:  							0x553,	/*1060 1*/
  203:  							0x5d2,	/*1160 2*/
  204:  							0x683,	/*1270 3*/
  205:  							0x70e,	/*1400 4*/
  206:  							0x7c8,	/*1530 5*/
  207:  							0x886,	/*1670 6*/
  208:  							0x949,	/*1830 7*/
  209:  							0xa42,	/*2000 8*/
  210:  							0xb43,	/*2200 9*/
  211:  							0xe46,	/*2800 A*/
  212:  							0x414,	/*810  B*/
  213:  							0x4d8,	/*970  C*/
  214:  							0x486,	/*885  D*/
  215:  							0xd45};	/*2600 E*/
  216:  
  217:  
  218:  bool bFlag;
  219:  byte AperPuerta;
  220:  bool bSQL;
  221:  
  222:  void PutString (char *string)
  223:  {

Function: PutString( unsigned char*)
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  0000 87               PSHA  
  0001 89               PSHX  
  0002 a7fe             AIS   #-2
  224:  	int n;
  225:  	for (n=0;string[n]!=0;n++)
  0004 95               TSX   
  0005 6f01             CLR   1,X
  0007 7f               CLR   ,X
  0008 200f             BRA   L19 ;abs = 0019
  000a          LA:     
  000a ad15             BSR   L21 ;abs = 0021
  226:  		while (Terminal_SendChar (string[n])==ERR_TXFULL);
  000c f6               LDA   ,X
  000d cd0000           JSR   Terminal_SendChar
  0010 410bf7           CBEQA #11,LA ;abs = 000a
  0013 95               TSX   
  0014 6c01             INC   1,X
  0016 2601             BNE   L19 ;abs = 0019
  0018 7c               INC   ,X
  0019          L19:    
  0019 ad06             BSR   L21 ;abs = 0021
  001b 7d               TST   ,X
  001c 26ec             BNE   LA ;abs = 000a
  227:  }
  001e a704             AIS   #4
  0020 81               RTS   
  0021          L21:    
  0021 95               TSX   
  0022 e605             LDA   5,X
  0024 eb03             ADD   3,X
  0026 87               PSHA  
  0027 e602             LDA   2,X
  0029 e904             ADC   4,X
  002b 87               PSHA  
  002c 8a               PULH  
  002d 88               PULX  
  002e 81               RTS   
  228:  
  229:  CFX828 FX828;
  230:  
  231:  void desconexion(void)
  232:  {

Function: desconexion( void)
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  233:  	AUDIO_DISABLE;
  0000 1a00             BSET  5,_PTC
  234:  	FX828.CTCSS_tx_enable (FALSE);		//Fin de transmisión subtono
  0002 450000           LDHX  @FX828
  0005 89               PSHX  
  0006 8b               PSHH  
  0007 4f               CLRA  
  0008 cd0000           JSR   CTCSS_tx_enable
  000b a702             AIS   #2
  235:  	FX828.EnableBPF (FALSE);			//Deshabilitamos salida de audio rx
  000d 450000           LDHX  @FX828
  0010 89               PSHX  
  0011 8b               PSHH  
  0012 4f               CLRA  
  0013 cd0000           JSR   EnableBPF
  0016 a702             AIS   #2
  236:  	PTT_OFF;
  0018 1400             BSET  2,_PTC
  237:  }
  001a 81               RTS   
  238:  
  239:  signed char teclado (void)
  240:  {

Function: teclado( void)
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  241:  	if (PTA<0x7f)	//Se detecta una pulsación
  0000 b600             LDA   _PTA
  0002 a17f             CMP   #127
  0004 2412             BCC   L18 ;abs = 0018
  242:  	{
  243:  		delay_ms (100);
  0006 a664             LDA   #100
  0008 5f               CLRX  
  0009 cd0000           JSR   delay_ms
  244:  		if (PTA<0x7f)
  000c b600             LDA   _PTA
  000e a17f             CMP   #127
  0010 2406             BCC   L18 ;abs = 0018
  245:  			return (~PTA)&0x7f;
  0012 b600             LDA   _PTA
  0014 43               COMA  
  0015 a47f             AND   #127
  0017 81               RTS   
  0018          L18:    
  246:  	}
  247:  	return -1;	//No hay ninguna tecla pulsada
  0018 a6ff             LDA   #-1
  248:  }
  001a 81               RTS   
  249:  
  250:  void maincpp (void)
  251:  {	

Function: maincpp
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  0000 a7a7             AIS   #-89
  252:  	int n;
  253:  	bool bFlag;
  254:  	signed char tecla;
  255:  	char str[5];
  256:  	char buffer[80];
  257:  	
  258:  	
  259:  	DDRA = 0;		//Porta como entradas (Teclado)
  0002 3f00             CLR   _DDRA
  260:  	DDRB = 0;
  0004 3f00             CLR   _DDRB
  261:  
  262:  	DDRC_DDRC2=TRUE;
  0006 1400             BSET  2,_DDRC
  263:  	DDRC_DDRC3=TRUE;
  0008 1600             BSET  3,_DDRC
  264:  	DDRC_DDRC4=TRUE;
  000a 1800             BSET  4,_DDRC
  265:  	DDRC_DDRC5=TRUE;
  000c 1a00             BSET  5,_DDRC
  266:  	DDRB_DDRB6=TRUE;
  000e 1c00             BSET  6,_DDRB
  267:  	DDRB_DDRB5=TRUE;
  0010 1a00             BSET  5,_DDRB
  268:  	DDRB_DDRB4=TRUE;
  0012 1800             BSET  4,_DDRB
  269:  	DDRA_DDRA6=FALSE;
  0014 1d00             BCLR  6,_DDRA
  270:  
  271:  	// Codificacion indicativo
  272:  	DDRD_DDRD4=FALSE;
  0016 1900             BCLR  4,_DDRD
  273:  	DDRD_DDRD5=FALSE;
  0018 1b00             BCLR  5,_DDRD
  274:  	DDRD_DDRD6=FALSE;
  001a 1d00             BCLR  6,_DDRD
  275:  	
  276:  	APERTURA_PUERTA1 = FALSE;
  001c 1900             BCLR  4,_PTC
  277:  	APERTURA_PUERTA2 = FALSE;
  001e 1d00             BCLR  6,_PTB
  278:  	APERTURA_PUERTA3 = FALSE;
  0020 1b00             BCLR  5,_PTB
  279:  	APERTURA_PUERTA4 = FALSE;
  0022 1900             BCLR  4,_PTB
  280:  
  281:  	bFlag=FALSE;
  0024 95               TSX   
  0025 6f02             CLR   2,X
  282:  	AperPuerta = 0;
  0027 4f               CLRA  
  0028 c70000           STA   AperPuerta
  283:  	bSQL = FALSE;
  002b c70000           STA   bSQL
  284:  
  285:  	EnableInterrupts;
  002e 9a               CLI   
  286:  	TIMER_Enable();
  002f cd0000           JSR   TIMER_Enable
  287:  	delay_ms(1);
  0032 a601             LDA   #1
  0034 5f               CLRX  
  0035 cd0000           JSR   delay_ms
  288:  
  289:  	PutString ("VPH1 Electronica Barcelona,S.L.\n\r");
  0038 a600             LDA   @"VPH1 Electronica Barcelona,S.L.\012\015"
  003a ae00             LDX   @"VPH1 Electronica Barcelona,S.L.\012\015":MSB
  003c cd0000           JSR   PutString
  003f cd036f           JSR   L36F ;abs = 036f
  290:  	sprintf (buffer,"Indicativo = %d\n\r",INDICATIVO);
  0042 4c               INCA  
  0043 2601             BNE   L46 ;abs = 0046
  0045 5c               INCX  
  0046          L46:    
  0046 87               PSHA  
  0047 89               PSHX  
  0048 450000           LDHX  @"Indicativo = %d\012\015"
  004b 89               PSHX  
  004c 8b               PSHH  
  004d 95               TSX   
  004e af0d             AIX   #13
  0050 89               PSHX  
  0051 8b               PSHH  
  0052 cd0000           JSR   sprintf
  0055 a706             AIS   #6
  291:  	PutString (buffer);
  0057 95               TSX   
  0058 cd03db           JSR   L3DB ;abs = 03db
  292:  	
  293:  	FX828.Init ();
  005b a600             LDA   @FX828
  005d ae00             LDX   @FX828:MSB
  005f cd0000           JSR   Init
  0062 cd0382           JSR   L382 ;abs = 0382
  294:  	
  295:  	FX828.Mod1Enable (TRUE,0x1f);	//Habilitamos mod1 con volumen al máximo
  296:  	FX828.Mod2Enable (FALSE,0);		//Deshabilitamos mod2
  297:  
  298:  	desconexion();
  0065 cd0000           JSR   desconexion
  0068          L68:    
  299:  
  300:  	while (TRUE)
  301:  	{
  302:  		tecla = teclado();
  0068 cd0000           JSR   teclado
  006b 95               TSX   
  006c e703             STA   3,X
  303:  		if (tecla>-1 && !bFlag)	//Pulsan una tecla del teclado
  006e 4c               INCA  
  006f 9203             BGT   L74 ;abs = 0074
  0071 cc0227           JMP   L227 ;abs = 0227
  0074          L74:    
  0074 6d02             TST   2,X
  0076 2703             BEQ   L7B ;abs = 007b
  0078 cc0229           JMP   L229 ;abs = 0229
  007b          L7B:    
  304:  		{		
  305:  			//Grabamos los tonos CTCSS en la tabla  RX TONE PROGRAM TABLE
  306:  			FX828.PutToneTable (0,RxCTCSSTable[((INDICATIVO-1)*5)]);		//Tono de SQL
  007b 450000           LDHX  @FX828
  007e 89               PSHX  
  007f 8b               PSHH  
  0080 5f               CLRX  
  0081 89               PSHX  
  0082 b600             LDA   _PTD
  0084 43               COMA  
  0085 a47f             AND   #127
  0087 cd03c5           JSR   L3C5 ;abs = 03c5
  008a cd03be           JSR   L3BE ;abs = 03be
  008d d60001           LDA   @RxCTCSSTable:1,X
  0090 de0000           LDX   @RxCTCSSTable,X
  0093 cd0000           JSR   PutToneTable
  0096 a703             AIS   #3
  307:  			FX828.PutToneTable (1,RxCTCSSTable[((INDICATIVO-1)*5)+1]);	//Tono de apertura de puerta 1
  0098 450000           LDHX  @FX828
  009b 89               PSHX  
  009c 8b               PSHH  
  009d a601             LDA   #1
  009f 87               PSHA  
  00a0 cd036f           JSR   L36F ;abs = 036f
  00a3 cd03be           JSR   L3BE ;abs = 03be
  00a6 d60003           LDA   @RxCTCSSTable:3,X
  00a9 de0002           LDX   @RxCTCSSTable:2,X
  00ac cd0000           JSR   PutToneTable
  00af a703             AIS   #3
  308:  			FX828.PutToneTable (2,RxCTCSSTable[((INDICATIVO-1)*5)+2]);	//Tono de apertura de puerta 2
  00b1 450000           LDHX  @FX828
  00b4 89               PSHX  
  00b5 8b               PSHH  
  00b6 a602             LDA   #2
  00b8 87               PSHA  
  00b9 cd036f           JSR   L36F ;abs = 036f
  00bc cd03be           JSR   L3BE ;abs = 03be
  00bf d60005           LDA   @RxCTCSSTable:5,X
  00c2 de0004           LDX   @RxCTCSSTable:4,X
  00c5 cd0000           JSR   PutToneTable
  00c8 a703             AIS   #3
  309:  			FX828.PutToneTable (3,RxCTCSSTable[((INDICATIVO-1)*5)+3]);	//Tono de apertura de puerta 3
  00ca 450000           LDHX  @FX828
  00cd 89               PSHX  
  00ce 8b               PSHH  
  00cf a603             LDA   #3
  00d1 87               PSHA  
  00d2 cd036f           JSR   L36F ;abs = 036f
  00d5 cd03be           JSR   L3BE ;abs = 03be
  00d8 d60007           LDA   @RxCTCSSTable:7,X
  00db de0006           LDX   @RxCTCSSTable:6,X
  00de cd0000           JSR   PutToneTable
  00e1 a703             AIS   #3
  310:  			FX828.PutToneTable (4,RxCTCSSTable[((INDICATIVO-1)*5)+4]);	//Tono de apertura de puerta 4
  00e3 450000           LDHX  @FX828
  00e6 89               PSHX  
  00e7 8b               PSHH  
  00e8 a604             LDA   #4
  00ea 87               PSHA  
  00eb cd036f           JSR   L36F ;abs = 036f
  00ee cd03be           JSR   L3BE ;abs = 03be
  00f1 d60009           LDA   @RxCTCSSTable:9,X
  00f4 de0008           LDX   @RxCTCSSTable:8,X
  00f7 cd0000           JSR   PutToneTable
  00fa a703             AIS   #3
  311:  
  312:  			FX828.SetDecoderBandwidth (0x08);			//Ponemos el ancho de banda a 1.1%
  00fc 450000           LDHX  @FX828
  00ff 89               PSHX  
  0100 8b               PSHH  
  0101 a608             LDA   #8
  0103 cd0000           JSR   SetDecoderBandwidth
  0106 a702             AIS   #2
  313:  			FX828.EnableToneDecoder (TRUE,CTCSS_MODE);	//Habilitamos el decodificador de tonos
  0108 450000           LDHX  @FX828
  010b 89               PSHX  
  010c 8b               PSHH  
  010d a601             LDA   #1
  010f 5f               CLRX  
  0110 cd0000           JSR   EnableToneDecoder
  0113 a702             AIS   #2
  314:  			FX828.ProgramFastCTCSS (FastCTCSSTable[((INDICATIVO-1)*5)]);				//Subtonos de 100 Hz para recibir y transmitir
  0115 b600             LDA   _PTD
  0117 450000           LDHX  @FX828
  011a 89               PSHX  
  011b 8b               PSHH  
  011c 43               COMA  
  011d a47f             AND   #127
  011f 5f               CLRX  
  0120 cd03c5           JSR   L3C5 ;abs = 03c5
  0123 ae05             LDX   #5
  0125 42               MUL   
  0126 48               LSLA  
  0127 48               LSLA  
  0128 8c               CLRH  
  0129 97               TAX   
  012a de0003           LDX   @FastCTCSSTable:3,X
  012d 89               PSHX  
  012e 97               TAX   
  012f de0002           LDX   @FastCTCSSTable:2,X
  0132 89               PSHX  
  0133 97               TAX   
  0134 de0001           LDX   @FastCTCSSTable:1,X
  0137 89               PSHX  
  0138 97               TAX   
  0139 de0000           LDX   @FastCTCSSTable,X
  013c 89               PSHX  
  013d cd0000           JSR   ProgramFastCTCSS
  0140 a706             AIS   #6
  0142 cd036f           JSR   L36F ;abs = 036f
  315:  			sprintf (buffer,"Indicativo = %d\n\r",INDICATIVO);
  0145 4c               INCA  
  0146 2601             BNE   L149 ;abs = 0149
  0148 5c               INCX  
  0149          L149:   
  0149 87               PSHA  
  014a 89               PSHX  
  014b 450000           LDHX  @"Indicativo = %d\012\015"
  014e 89               PSHX  
  014f 8b               PSHH  
  0150 95               TSX   
  0151 af0d             AIX   #13
  0153 89               PSHX  
  0154 8b               PSHH  
  0155 cd0000           JSR   sprintf
  0158 a706             AIS   #6
  316:  			PutString (buffer);
  015a 95               TSX   
  015b cd03db           JSR   L3DB ;abs = 03db
  317:  		
  318:  			//GENERAMOS UN TONO EN EL ALTAVOZ
  319:  			AUDIO_ENABLE;
  015e 1b00             BCLR  5,_PTC
  320:  			FX828.Mod1Enable (FALSE,0);	//Habilitamos mod1 con volumen al máximo
  0160 450000           LDHX  @FX828
  0163 89               PSHX  
  0164 8b               PSHH  
  0165 4f               CLRA  
  0166 5f               CLRX  
  0167 cd0000           JSR   Mod1Enable
  016a a702             AIS   #2
  321:  			FX828.Mod2Enable (TRUE,0x1f);
  016c 450000           LDHX  @FX828
  016f 89               PSHX  
  0170 8b               PSHH  
  0171 a601             LDA   #1
  0173 ae1f             LDX   #31
  0175 cd0000           JSR   Mod2Enable
  0178 a702             AIS   #2
  322:  			FX828.ProgramZVEI (200.0);
  017a 450000           LDHX  @FX828
  017d 89               PSHX  
  017e 8b               PSHH  
  017f 4f               CLRA  
  0180 87               PSHA  
  0181 87               PSHA  
  0182 454348           LDHX  #17224
  0185 89               PSHX  
  0186 8b               PSHH  
  0187 cd0000           JSR   ProgramZVEI
  018a a706             AIS   #6
  323:  			FX828.ZVEI_tx_enable(TRUE);
  018c 450000           LDHX  @FX828
  018f 89               PSHX  
  0190 8b               PSHH  
  0191 a601             LDA   #1
  0193 cd0000           JSR   ZVEI_tx_enable
  0196 a702             AIS   #2
  0198          L198:   
  324:  			while (teclado()>-1);
  0198 cd0000           JSR   teclado
  019b 4c               INCA  
  019c 92fa             BGT   L198 ;abs = 0198
  325:  			FX828.ZVEI_tx_enable(FALSE);
  019e 450000           LDHX  @FX828
  01a1 89               PSHX  
  01a2 8b               PSHH  
  01a3 4f               CLRA  
  01a4 cd0000           JSR   ZVEI_tx_enable
  01a7 a702             AIS   #2
  326:  			AUDIO_DISABLE;
  01a9 1a00             BSET  5,_PTC
  01ab cd0382           JSR   L382 ;abs = 0382
  327:  			FX828.Mod1Enable (TRUE,0x1f);	//Habilitamos mod1 con volumen al máximo
  328:  			FX828.Mod2Enable (FALSE,0);		//Deshabilitamos mod2
  329:  			
  330:  			PTT_ON;
  01ae 1500             BCLR  2,_PTC
  01b0 cd039d           JSR   L39D ;abs = 039d
  01b3 cd03e3           JSR   L3E3 ;abs = 03e3
  331:  		
  332:  			//Componemos el código ZVEI
  333:  //			sprintf (str,"%04d",tecla);
  334:  						
  335:  			//Transmitimos:
  336:  			//
  337:  			// --- --- --- --- ---
  338:  			//| B | I | T | T | T |
  339:  			// --- --- --- --- ---
  340:  			//
  341:  			// B = Inicio de trama (B)
  342:  			// I = Indicativo (Número de puerta) 1 dígito
  343:  			// T = Tecla pulsada o pulsador 3 Dígitos
  344:  			
  345:  			sprintf (str,"%01d%03d",INDICATIVO,tecla);
  01b6 89               PSHX  
  01b7 87               PSHA  
  01b8 cd036f           JSR   L36F ;abs = 036f
  01bb 4c               INCA  
  01bc 2601             BNE   L1BF ;abs = 01bf
  01be 5c               INCX  
  01bf          L1BF:   
  01bf 87               PSHA  
  01c0 89               PSHX  
  01c1 450000           LDHX  @"%01d%03d"
  01c4 89               PSHX  
  01c5 8b               PSHH  
  01c6 95               TSX   
  01c7 af0a             AIX   #10
  01c9 89               PSHX  
  01ca 8b               PSHH  
  01cb cd0000           JSR   sprintf
  01ce a708             AIS   #8
  346:  			delay_ms(500);
  01d0 a6f4             LDA   #-12
  01d2 ae01             LDX   #1
  01d4 cd0000           JSR   delay_ms
  01d7 cd03ce           JSR   L3CE ;abs = 03ce
  347:  			FX828.CTCSS_tx_enable (TRUE);
  348:  			DisableInterrupts;
  01da 9b               SEI   
  01db cd03ae           JSR   L3AE ;abs = 03ae
  349:  			FX828.TxZVEI (0x0b);
  350:  			FX828.TxZVEI (str);
  01de 89               PSHX  
  01df 8b               PSHH  
  01e0 95               TSX   
  01e1 af06             AIX   #6
  01e3 9f               TXA   
  01e4 8b               PSHH  
  01e5 88               PULX  
  01e6 cd0000           JSR   TxZVEI
  01e9 a702             AIS   #2
  351:  			EnableInterrupts;
  01eb 9a               CLI   
  01ec cd03e3           JSR   L3E3 ;abs = 03e3
  352:  			sprintf (str,"%04d",tecla);		
  01ef 89               PSHX  
  01f0 87               PSHA  
  01f1 450000           LDHX  @"%04d"
  01f4 89               PSHX  
  01f5 8b               PSHH  
  01f6 95               TSX   
  01f7 af08             AIX   #8
  01f9 89               PSHX  
  01fa 8b               PSHH  
  01fb cd0000           JSR   sprintf
  01fe a706             AIS   #6
  353:  			delay_ms(510);
  0200 a6fe             LDA   #-2
  0202 ae01             LDX   #1
  0204 cd0000           JSR   delay_ms
  354:  			DisableInterrupts;
  0207 9b               SEI   
  0208 cd03ae           JSR   L3AE ;abs = 03ae
  355:  			FX828.TxZVEI (0x0b);
  356:  			FX828.TxZVEI (str);
  020b 89               PSHX  
  020c 8b               PSHH  
  020d 95               TSX   
  020e af06             AIX   #6
  0210 9f               TXA   
  0211 8b               PSHH  
  0212 88               PULX  
  0213 cd0000           JSR   TxZVEI
  0216 a702             AIS   #2
  357:  			EnableInterrupts;
  0218 9a               CLI   
  358:  			delay_ms(500);
  0219 a6f4             LDA   #-12
  021b ae01             LDX   #1
  021d cd0000           JSR   delay_ms
  359:  			desconexion();
  0220 cd0000           JSR   desconexion
  0223          L223:   
  360:  		
  361:  		
  362:  			while (teclado()>-1);
  0223 cd0000           JSR   teclado
  0226 4c               INCA  
  0227          L227:   
  0227 92fa             BGT   L223 ;abs = 0223
  0229          L229:   
  363:  			
  364:  		}
  365:  	
  366:  		if (bFlag && AperPuerta)
  0229 95               TSX   
  022a 6d02             TST   2,X
  022c 276a             BEQ   L298 ;abs = 0298
  022e c60000           LDA   AperPuerta
  0231 2765             BEQ   L298 ;abs = 0298
  367:  		{
  368:  			switch (AperPuerta)
  0233 a104             CMP   #4
  0235 2261             BHI   L298 ;abs = 0298
  0237 a001             SUB   #1
  0239 97               TAX   
  023a 4f               CLRA  
  023b cd0000           JSR   _Jump_Table_Header_Offset
  023e 04               DC.B  4
  023f ae               DC.B  L2EE
  0240 03               DC.B  L244
  0241 2d               DC.B  L26F
  0242 57               DC.B  L29A
  0243 81               DC.B  L2C5
  0244          L244:   
  369:  			{
  370:  				case 1:
  371:  					for (n=0;n<50 && AperPuerta;n++) delay_ms(1);
  0244 95               TSX   
  0245 6f01             CLR   1,X
  0247 7f               CLR   ,X
  0248 2007             BRA   L251 ;abs = 0251
  024a          L24A:   
  024a cd0378           JSR   L378 ;abs = 0378
  024d 95               TSX   
  024e 2601             BNE   L251 ;abs = 0251
  0250 7c               INC   ,X
  0251          L251:   
  0251 cd03a3           JSR   L3A3 ;abs = 03a3
  0254 9005             BGE   L25B ;abs = 025b
  0256 c60000           LDA   AperPuerta
  0259 26ef             BNE   L24A ;abs = 024a
  025b          L25B:   
  372:  					if (n>=49)
  025b 650031           CPHX  #49
  025e 9138             BLT   L298 ;abs = 0298
  373:  					{
  374:  						APERTURA_PUERTA1=TRUE;
  0260 1800             BSET  4,_PTC
  0262 cd039d           JSR   L39D ;abs = 039d
  0265          L265:   
  375:  						delay_ms(100);
  376:  						while (AperPuerta==1)	//Mientras esté el subotono de apertura
  0265 c60000           LDA   AperPuerta
  0268 4101fa           CBEQA #1,L265 ;abs = 0265
  377:  						{
  378:  							if (AperPuerta!=1)	//Nos aseguramos de que realmente ya no hay subtono
  379:  								for (int i=0;i<500 && !AperPuerta;i++) delay_ms(1);
  380:  						}
  381:  						APERTURA_PUERTA1=FALSE;
  026b 1900             BCLR  4,_PTC
  026d          L26D:   
  026d 207f             BRA   L2EE ;abs = 02ee
  026f          L26F:   
  382:  					}
  383:  				break;
  384:  				
  385:  				case 2:
  386:  					for (n=0;n<50 && AperPuerta;n++) delay_ms(1);
  026f 95               TSX   
  0270 6f01             CLR   1,X
  0272 7f               CLR   ,X
  0273 2007             BRA   L27C ;abs = 027c
  0275          L275:   
  0275 cd0378           JSR   L378 ;abs = 0378
  0278 95               TSX   
  0279 2601             BNE   L27C ;abs = 027c
  027b 7c               INC   ,X
  027c          L27C:   
  027c cd03a3           JSR   L3A3 ;abs = 03a3
  027f 9005             BGE   L286 ;abs = 0286
  0281 c60000           LDA   AperPuerta
  0284 26ef             BNE   L275 ;abs = 0275
  0286          L286:   
  387:  					if (n>=49)
  0286 650031           CPHX  #49
  0289 9163             BLT   L2EE ;abs = 02ee
  388:  					{
  389:  						APERTURA_PUERTA2=TRUE;
  028b 1c00             BSET  6,_PTB
  028d cd039d           JSR   L39D ;abs = 039d
  0290          L290:   
  390:  						delay_ms(100);
  391:  						while (AperPuerta==2)	//Mientras esté el subotono de apertura
  0290 c60000           LDA   AperPuerta
  0293 4102fa           CBEQA #2,L290 ;abs = 0290
  392:  						{
  393:  							if (AperPuerta!=2)	//Nos aseguramos de que realmente ya no hay subtono
  394:  								for (int i=0;i<500 && !AperPuerta;i++) delay_ms(1);
  395:  						}
  396:  						APERTURA_PUERTA2=FALSE;
  0296 1d00             BCLR  6,_PTB
  0298          L298:   
  0298 2054             BRA   L2EE ;abs = 02ee
  029a          L29A:   
  397:  					}
  398:  				break;
  399:  
  400:  				case 3:
  401:  					for (n=0;n<50 && AperPuerta;n++) delay_ms(1);
  029a 95               TSX   
  029b 6f01             CLR   1,X
  029d 7f               CLR   ,X
  029e 2007             BRA   L2A7 ;abs = 02a7
  02a0          L2A0:   
  02a0 cd0378           JSR   L378 ;abs = 0378
  02a3 95               TSX   
  02a4 2601             BNE   L2A7 ;abs = 02a7
  02a6 7c               INC   ,X
  02a7          L2A7:   
  02a7 cd03a3           JSR   L3A3 ;abs = 03a3
  02aa 9005             BGE   L2B1 ;abs = 02b1
  02ac c60000           LDA   AperPuerta
  02af 26ef             BNE   L2A0 ;abs = 02a0
  02b1          L2B1:   
  402:  					if (n>=49)
  02b1 650031           CPHX  #49
  02b4 9138             BLT   L2EE ;abs = 02ee
  403:  					{
  404:  						APERTURA_PUERTA3=TRUE;
  02b6 1a00             BSET  5,_PTB
  02b8 cd039d           JSR   L39D ;abs = 039d
  02bb          L2BB:   
  405:  						delay_ms(100);
  406:  						while (AperPuerta==3)	//Mientras esté el subotono de apertura
  02bb c60000           LDA   AperPuerta
  02be 4103fa           CBEQA #3,L2BB ;abs = 02bb
  407:  						{
  408:  							if (AperPuerta!=3)	//Nos aseguramos de que realmente ya no hay subtono
  409:  								for (int i=0;i<500 && !AperPuerta;i++) delay_ms(1);
  410:  						}
  411:  						APERTURA_PUERTA3=FALSE;
  02c1 1b00             BCLR  5,_PTB
  02c3 2029             BRA   L2EE ;abs = 02ee
  02c5          L2C5:   
  412:  					}
  413:  				break;
  414:  				
  415:  				case 4:
  416:  					for (n=0;n<50 && AperPuerta;n++) delay_ms(1);
  02c5 95               TSX   
  02c6 6f01             CLR   1,X
  02c8 7f               CLR   ,X
  02c9 2007             BRA   L2D2 ;abs = 02d2
  02cb          L2CB:   
  02cb cd0378           JSR   L378 ;abs = 0378
  02ce 95               TSX   
  02cf 2601             BNE   L2D2 ;abs = 02d2
  02d1 7c               INC   ,X
  02d2          L2D2:   
  02d2 cd03a3           JSR   L3A3 ;abs = 03a3
  02d5 9005             BGE   L2DC ;abs = 02dc
  02d7 c60000           LDA   AperPuerta
  02da 26ef             BNE   L2CB ;abs = 02cb
  02dc          L2DC:   
  417:  					if (n>=49)
  02dc 650031           CPHX  #49
  02df 910d             BLT   L2EE ;abs = 02ee
  418:  					{
  419:  						APERTURA_PUERTA4=TRUE;
  02e1 1800             BSET  4,_PTB
  02e3 cd039d           JSR   L39D ;abs = 039d
  02e6          L2E6:   
  420:  						delay_ms(100);
  421:  						while (AperPuerta==4)	//Mientras esté el subotono de apertura
  02e6 c60000           LDA   AperPuerta
  02e9 4104fa           CBEQA #4,L2E6 ;abs = 02e6
  422:  						{
  423:  							if (AperPuerta!=4)	//Nos aseguramos de que realmente ya no hay subtono
  424:  								for (int i=0;i<500 && !AperPuerta;i++) delay_ms(1);
  425:  						}
  426:  						APERTURA_PUERTA4=FALSE;
  02ec 1900             BCLR  4,_PTB
  02ee          L2EE:   
  427:  					}
  428:  				break;		
  429:  			}
  430:  		}
  431:  		
  432:  		if (bSQL && !bFlag)	//Nos llaman
  02ee c60000           LDA   bSQL
  02f1 2740             BEQ   L333 ;abs = 0333
  02f3 95               TSX   
  02f4 6d02             TST   2,X
  02f6 263b             BNE   L333 ;abs = 0333
  433:  		{
  434:  			for (n=0;n<100 && bSQL;n++) delay_ms(1);
  02f8 6f01             CLR   1,X
  02fa 7f               CLR   ,X
  02fb 2006             BRA   L303 ;abs = 0303
  02fd          L2FD:   
  02fd ad79             BSR   L378 ;abs = 0378
  02ff 95               TSX   
  0300 2601             BNE   L303 ;abs = 0303
  0302 7c               INC   ,X
  0303          L303:   
  0303 95               TSX   
  0304 f6               LDA   ,X
  0305 87               PSHA  
  0306 ee01             LDX   1,X
  0308 8a               PULH  
  0309 650064           CPHX  #100
  030c 9005             BGE   L313 ;abs = 0313
  030e c60000           LDA   bSQL
  0311 26ea             BNE   L2FD ;abs = 02fd
  0313          L313:   
  435:  			if (n>=49)
  0313 650031           CPHX  #49
  0316 911b             BLT   L333 ;abs = 0333
  436:  			{
  437:  				PTT_ON;
  0318 1500             BCLR  2,_PTC
  031a cd039d           JSR   L39D ;abs = 039d
  438:  				AUDIO_ENABLE;
  031d 1b00             BCLR  5,_PTC
  031f cd03ce           JSR   L3CE ;abs = 03ce
  439:  				FX828.CTCSS_tx_enable (TRUE);//Transmitimos subtono
  440:  				FX828.EnableBPF (TRUE);		 //Habilitamos salida de audio rx
  0322 450000           LDHX  @FX828
  0325 89               PSHX  
  0326 8b               PSHH  
  0327 a601             LDA   #1
  0329 cd0000           JSR   EnableBPF
  032c a702             AIS   #2
  441:  				bFlag = TRUE;
  032e a601             LDA   #1
  0330 95               TSX   
  0331 e702             STA   2,X
  0333          L333:   
  442:  			}
  443:  		}
  444:  
  445:  		if (!bSQL && bFlag)	//Perdemos subtono
  0333 c60000           LDA   bSQL
  0336 2634             BNE   L36C ;abs = 036c
  0338 95               TSX   
  0339 6d02             TST   2,X
  033b 272f             BEQ   L36C ;abs = 036c
  446:  		{
  447:  			AUDIO_DISABLE;
  033d 1a00             BSET  5,_PTC
  448:  			if (bFlag == TRUE)
  033f e602             LDA   2,X
  0341 4b29             DBNZA L36C ;abs = 036c
  449:  			{
  450:  				for (n=0;n<500 && !bSQL;n++) delay_ms(1);
  0343 6f01             CLR   1,X
  0345 7f               CLR   ,X
  0346 2006             BRA   L34E ;abs = 034e
  0348          L348:   
  0348 ad2e             BSR   L378 ;abs = 0378
  034a 95               TSX   
  034b 2601             BNE   L34E ;abs = 034e
  034d 7c               INC   ,X
  034e          L34E:   
  034e 95               TSX   
  034f f6               LDA   ,X
  0350 87               PSHA  
  0351 ee01             LDX   1,X
  0353 8a               PULH  
  0354 6501f4           CPHX  #500
  0357 9005             BGE   L35E ;abs = 035e
  0359 c60000           LDA   bSQL
  035c 27ea             BEQ   L348 ;abs = 0348
  035e          L35E:   
  451:  				if (n>=499)
  035e 6501f3           CPHX  #499
  0361 9107             BLT   L36A ;abs = 036a
  452:  				{
  453:  					desconexion();
  0363 cd0000           JSR   desconexion
  454:  					bFlag = FALSE;				
  0366 95               TSX   
  0367 6f02             CLR   2,X
  455:  				}
  0369 65               SKIP2 L36C ;abs = 036c
  036a          L36A:   
  456:  				else	
  457:  					AUDIO_ENABLE;
  036a 1b00             BCLR  5,_PTC
  036c          L36C:   
  036c cc0068           JMP   L68 ;abs = 0068
  036f          L36F:   
  036f b600             LDA   _PTD
  0371 43               COMA  
  0372 a47f             AND   #127
  0374 5f               CLRX  
  0375 ad4e             BSR   L3C5 ;abs = 03c5
  0377 81               RTS   
  0378          L378:   
  0378 a601             LDA   #1
  037a 5f               CLRX  
  037b cd0000           JSR   delay_ms
  037e 95               TSX   
  037f 6c03             INC   3,X
  0381 81               RTS   
  0382          L382:   
  0382 450000           LDHX  @FX828
  0385 89               PSHX  
  0386 8b               PSHH  
  0387 a601             LDA   #1
  0389 ae1f             LDX   #31
  038b cd0000           JSR   Mod1Enable
  038e a702             AIS   #2
  0390 450000           LDHX  @FX828
  0393 89               PSHX  
  0394 8b               PSHH  
  0395 4f               CLRA  
  0396 5f               CLRX  
  0397 cd0000           JSR   Mod2Enable
  039a a702             AIS   #2
  039c 81               RTS   
  039d          L39D:   
  039d a664             LDA   #100
  039f 5f               CLRX  
  03a0 cc0000           JMP   delay_ms
  03a3          L3A3:   
  03a3 95               TSX   
  03a4 e602             LDA   2,X
  03a6 87               PSHA  
  03a7 ee03             LDX   3,X
  03a9 8a               PULH  
  03aa 650032           CPHX  #50
  03ad 81               RTS   
  03ae          L3AE:   
  03ae 450000           LDHX  @FX828
  03b1 89               PSHX  
  03b2 8b               PSHH  
  03b3 a60b             LDA   #11
  03b5 cd0000           JSR   TxZVEI
  03b8 a702             AIS   #2
  03ba 450000           LDHX  @FX828
  03bd 81               RTS   
  03be          L3BE:   
  03be ae05             LDX   #5
  03c0 42               MUL   
  03c1 48               LSLA  
  03c2 8c               CLRH  
  03c3 97               TAX   
  03c4 81               RTS   
  03c5          L3C5:   
  03c5 54               LSRX  
  03c6 46               RORA  
  03c7 54               LSRX  
  03c8 46               RORA  
  03c9 54               LSRX  
  03ca 46               RORA  
  03cb 54               LSRX  
  03cc 46               RORA  
  03cd 81               RTS   
  03ce          L3CE:   
  03ce 450000           LDHX  @FX828
  03d1 89               PSHX  
  03d2 8b               PSHH  
  03d3 a601             LDA   #1
  03d5 cd0000           JSR   CTCSS_tx_enable
  03d8 a702             AIS   #2
  03da 81               RTS   
  03db          L3DB:   
  03db af09             AIX   #9
  03dd 9f               TXA   
  03de 8b               PSHH  
  03df 88               PULX  
  03e0 cc0000           JMP   PutString
  03e3          L3E3:   
  03e3 95               TSX   
  03e4 e605             LDA   5,X
  03e6 48               LSLA  
  03e7 4f               CLRA  
  03e8 a200             SBC   #0
  03ea ee05             LDX   5,X
  03ec 81               RTS   
  458:  			}
  459:  		}
  460:  	
  461:  	}
  462:  }
  463:  
  464:  #ifdef __cplusplu
  465:  	extern "C"
  466:  #endif
  467:  
  468:  void MainIRQ ()
  469:  {

Function: MainIRQ
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106

  470:  	byte tono;
  471:  	FX828.IRQService();
  0000 a600             LDA   @FX828
  0002 ae00             LDX   @FX828:MSB
  0004 cd0000           JSR   IRQService
  472:  	tono = FX828.GetTone();
  0007 a600             LDA   @FX828
  0009 ae00             LDX   @FX828:MSB
  000b cd0000           JSR   GetTone
  473:  
  474:  	switch (tono)
  000e a1ff             CMP   #-1
  0010 2212             BHI   L24 ;abs = 0024
  0012 a100             CMP   #0
  0014 250e             BCS   L24 ;abs = 0024
  0016 a104             CMP   #4
  0018 220a             BHI   L24 ;abs = 0024
  001a 97               TAX   
  001b 4f               CLRA  
  001c cd0000           JSR   _Jump_Table_Offset
  001f 0c               DC.B  L2C
  0020 13               DC.B  L34
  0021 16               DC.B  L38
  0022 19               DC.B  L3C
  0023 1b               DC.B  L3F
  0024          L24:    
  475:  	{
  476:  		case 0:
  477:  			bSQL = TRUE;
  478:  			AperPuerta=0;
  479:  		break;	
  480:  		
  481:  		case 1:
  482:  			AperPuerta =1;
  483:  //			bSQL=TRUE;
  484:  		break;
  485:  		
  486:  		case 2:
  487:  			AperPuerta =2;
  488:  //			bSQL=TRUE;
  489:  		break;
  490:  
  491:  		case 3:
  492:  			AperPuerta =3;
  493:  //			bSQL=TRUE;
  494:  		break;
  495:  
  496:  		case 4:
  497:  			AperPuerta =4;
  498:  //			bSQL=TRUE;
  499:  		break;
  500:  
  501:  		case 0xFF:
  502:  		case UNKNOWN_TONE:
  503:  			AperPuerta =0;
  0024 4f               CLRA  
  0025 c70000           STA   AperPuerta
  504:  			bSQL = FALSE;
  0028 c70000           STA   bSQL
  002b 81               RTS   
  002c          L2C:    
  002c a601             LDA   #1
  002e c70000           STA   bSQL
  0031 4f               CLRA  
  0032 200d             BRA   L41 ;abs = 0041
  0034          L34:    
  0034 a601             LDA   #1
  0036 2009             BRA   L41 ;abs = 0041
  0038          L38:    
  0038 a602             LDA   #2
  003a 2005             BRA   L41 ;abs = 0041
  003c          L3C:    
  003c a603             LDA   #3
  003e 65               SKIP2 L41 ;abs = 0041
  003f          L3F:    
  003f a604             LDA   #4
  0041          L41:    
  0041 c70000           STA   AperPuerta
  505:  		break;
  506:  
  507:  		default:
  508:  			AperPuerta = 0;
  509:  			bSQL = FALSE;
  510:  		break;
  511:  	
  512:  	}
  513:  }
  0044 81               RTS   

Function: __ConstructorInit__
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 a600             LDA   @FX828
  0002 ae00             LDX   @FX828:MSB
  0004 cc0000           JMP   CONSTRUCTOR

Function: __DestructorInit__
Source  : Z:\vph1\maestro\v7\calle\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\maestro\v7\calle;Z:\vph1\maestro\v7\calle\bin;Z:\vph1\maestro\v7\calle\cmd;*Z:\vph1\maestro\v7\calle\Code;Z:\vph1\maestro\v7\calle\prm;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\maestro\v7\Comun;*Z:\vph1\maestro\v7;Z:\vph1\maestro\v7\calle\doc;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\hc08c\include;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\Bin\Plugins\support\ProcessorExpert\PESL\HC08;D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior CW08_V3.0\lib\HC08c\INCLUDE" -EnvOBJPATH=Z:\vph1\maestro\v7\calle\bin -EnvTEXTPATH=Z:\vph1\maestro\v7\calle\bin -Lasm=%n.lst -ObjN=Z:\vph1\maestro\v7\calle\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 a600             LDA   @FX828
  0002 ae00             LDX   @FX828:MSB
  0004 cc0000           JMP   DESTRUCTOR
  514:  
  515:  /* END vph1 */
  516:  /*
  517:  ** ###################################################################
  518:  **
  519:  **     This file was created by UNIS Processor Expert 02.89 for 
  520:  **     the Motorola HC08 series of microcontrollers.
  521:  **
  522:  ** ###################################################################
  523:  */
  524:  
