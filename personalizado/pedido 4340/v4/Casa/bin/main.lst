ANSI-C/cC++ Compiler for HC08 V-5.0.15, Apr 11 2002

    1:  /*
    2:  ** ###################################################################
    3:  **
    4:  **     Filename  : vph1.C
    5:  **
    6:  **     Project   : vph1
    7:  ** 
    8:  **     Processor : MC68HC908GP32CFB
    9:  **

Function: CBuffer::CBuffer( const CBuffer&)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 e601             LDA   1,X
  0007 87               PSHA  
  0008 f6               LDA   ,X
  0009 87               PSHA  
  000a 95               TSX   
  000b e606             LDA   6,X
  000d 87               PSHA  
  000e ee07             LDX   7,X
  0010 9ee603           LDA   3,SP
  0013 8a               PULH  
  0014 e701             STA   1,X
  0016 86               PULA  
  0017 f7               STA   ,X
  0018 95               TSX   
  0019 e601             LDA   1,X
  001b 87               PSHA  
  001c ee02             LDX   2,X
  001e 8a               PULH  
  001f e603             LDA   3,X
  0021 ee02             LDX   2,X
  0023 9ee701           STA   1,SP
  0026 9ee606           LDA   6,SP
  0029 87               PSHA  
  002a 8a               PULH  
  002b 86               PULA  
  002c 89               PSHX  
  002d 9eee07           LDX   7,SP
  0030 e703             STA   3,X
  0032 86               PULA  
  0033 e702             STA   2,X
  0035 95               TSX   
  0036 f6               LDA   ,X
  0037 87               PSHA  
  0038 ee01             LDX   1,X
  003a 8a               PULH  
  003b e605             LDA   5,X
  003d ee04             LDX   4,X
  003f 87               PSHA  
  0040 9ee606           LDA   6,SP
  0043 87               PSHA  
  0044 8a               PULH  
  0045 86               PULA  
  0046 89               PSHX  
  0047 9eee07           LDX   7,SP
  004a e705             STA   5,X
  004c 86               PULA  
  004d e704             STA   4,X
  004f a702             AIS   #2
  0051 81               RTS   

Function: CBuffer::operator =( const CBuffer&)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 e601             LDA   1,X
  0007 87               PSHA  
  0008 f6               LDA   ,X
  0009 95               TSX   
  000a ee05             LDX   5,X
  000c 89               PSHX  
  000d 95               TSX   
  000e ee07             LDX   7,X
  0010 8a               PULH  
  0011 87               PSHA  
  0012 9ee602           LDA   2,SP
  0015 e701             STA   1,X
  0017 86               PULA  
  0018 f7               STA   ,X
  0019 95               TSX   
  001a e601             LDA   1,X
  001c 87               PSHA  
  001d ee02             LDX   2,X
  001f 8a               PULH  
  0020 e603             LDA   3,X
  0022 ee02             LDX   2,X
  0024 9ee701           STA   1,SP
  0027 9ee606           LDA   6,SP
  002a 87               PSHA  
  002b 8a               PULH  
  002c 86               PULA  
  002d 89               PSHX  
  002e 9eee07           LDX   7,SP
  0031 e703             STA   3,X
  0033 86               PULA  
  0034 e702             STA   2,X
  0036 95               TSX   
  0037 f6               LDA   ,X
  0038 87               PSHA  
  0039 ee01             LDX   1,X
  003b 8a               PULH  
  003c e605             LDA   5,X
  003e ee04             LDX   4,X
  0040 87               PSHA  
  0041 9ee606           LDA   6,SP
  0044 87               PSHA  
  0045 8a               PULH  
  0046 86               PULA  
  0047 89               PSHX  
  0048 9eee07           LDX   7,SP
  004b e705             STA   5,X
  004d 86               PULA  
  004e e704             STA   4,X
  0050 9f               TXA   
  0051 8b               PSHH  
  0052 88               PULX  
  0053 a702             AIS   #2
  0055 81               RTS   
    1:  #include "pe_types.h"
    2:  #include "buffer.h"
    3:  
    4:  #define BUFFER_FULL	-2
    5:  #define ERROR		-1
    6:  
    7:  #define	GENERAL_RESET			0x01
    8:  #define SIGNALLING_CONTROL		0x80
    9:  #define SELCALL_SUBAUDIO_STATUS 0x81
   10:  #define	SIGNALLING_SETUP		0x82
   11:  #define CTSS_TX_FAST_RX_FREQ	0x83
   12:  #define	RX_TONE_PROGRAM			0x84
   13:  #define	DCS_BYTE3				0x85
   14:  #define	DCS_BYTE2				0x86
   15:  #define	DCS_BYTE1				0x87
   16:  #define GENERAL_CONTROL			0x88
   17:  #define	AUDIO_CONTROL			0x8A
   18:  #define GENERAL_PURPOSE_TIMER	0x8B
   19:  #define	SELCALL_TX				0x8D
   20:  #define	IRQ_MASK				0x8E
   21:  #define IRQ_FLAG				0x8F
   22:  
   23:  #define CTCSS_MODE	 			0
   24:  #define SELCALL_MODE 			1
   25:  
   26:  #define chip_select_ClrVal() (PTC &= ~64)
   27:  #define chip_select_SetVal() (PTC |= 64)
   28:  #define DataIn_GetVal() ((PTD) & 2)
   29:  
   30:  #define DETECT_MODE		0
   31:  #define	PREDICTIVE_MODE	1
   32:  #define	UNKNOWN_TONE	0x0f
   33:  
   34:  #ifdef __cplusplus
   35:  
   36:  class CFX828
   37:  {
   38:  	public:
   39:  		CFX828 ();
   40:  		~CFX828 ();
   41:  		
   42:  		void Init ();
   43:  		int  TxZVEI (const byte *);
   44:  		int	 TxZVEI (byte tono);
   45:  		bool IsTxBufferEmpty();
   46:  		void ProgramFastCTCSS (int tono);
   47:  		void CTCSS_tx_enable (unsigned char enable);
   48:  		void PutToneTable (byte pos, int tono);
   49:  		void SetDecoderBandwidth (byte width);
   50:  		void EnableToneDecoder (bool enable, bool mode);
   51:  		void EnableCTCSSDecoder (bool enable, bool mode);
   52:  		void IRQService ();
   53:  		char GetTone ();
   54:  		bool CTCSS_Detected (void);
   55:  		void SetRepeatTone (byte tono = 0xe) {_RepeatTone = tono;}

Function: CFX828::SetRepeatTone( unsigned char)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Comun\fx828.h
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  0000 87               PSHA  
  0001 95               TSX   
  0002 e603             LDA   3,X
  0004 87               PSHA  
  0005 ee04             LDX   4,X
  0007 9ee602           LDA   2,SP
  000a 8a               PULH  
  000b e704             STA   4,X
  000d 8a               PULH  
  000e 81               RTS   

Function: CFX828::CFX828( const CFX828&)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 e601             LDA   1,X
  0007 87               PSHA  
  0008 f6               LDA   ,X
  0009 87               PSHA  
  000a 95               TSX   
  000b e606             LDA   6,X
  000d 87               PSHA  
  000e ee07             LDX   7,X
  0010 9ee603           LDA   3,SP
  0013 8a               PULH  
  0014 e701             STA   1,X
  0016 86               PULA  
  0017 f7               STA   ,X
  0018 95               TSX   
  0019 e601             LDA   1,X
  001b 87               PSHA  
  001c ee02             LDX   2,X
  001e 8a               PULH  
  001f e603             LDA   3,X
  0021 ee02             LDX   2,X
  0023 9ee701           STA   1,SP
  0026 9ee606           LDA   6,SP
  0029 87               PSHA  
  002a 8a               PULH  
  002b 86               PULA  
  002c 89               PSHX  
  002d 9eee07           LDX   7,SP
  0030 e703             STA   3,X
  0032 86               PULA  
  0033 e702             STA   2,X
  0035 95               TSX   
  0036 f6               LDA   ,X
  0037 87               PSHA  
  0038 ee01             LDX   1,X
  003a 8a               PULH  
  003b e604             LDA   4,X
  003d 95               TSX   
  003e ee04             LDX   4,X
  0040 89               PSHX  
  0041 95               TSX   
  0042 ee06             LDX   6,X
  0044 8a               PULH  
  0045 e704             STA   4,X
  0047 a702             AIS   #2
  0049 81               RTS   

Function: CFX828::operator =( const CFX828&)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 87               PSHA  
  0001 89               PSHX  
  0002 89               PSHX  
  0003 8a               PULH  
  0004 97               TAX   
  0005 e604             LDA   4,X
  0007 95               TSX   
  0008 ee04             LDX   4,X
  000a 89               PSHX  
  000b 95               TSX   
  000c ee06             LDX   6,X
  000e 8a               PULH  
  000f e704             STA   4,X
  0011 95               TSX   
  0012 f6               LDA   ,X
  0013 87               PSHA  
  0014 ee01             LDX   1,X
  0016 8a               PULH  
  0017 e601             LDA   1,X
  0019 fe               LDX   ,X
  001a 87               PSHA  
  001b 9ee606           LDA   6,SP
  001e 87               PSHA  
  001f 8a               PULH  
  0020 86               PULA  
  0021 89               PSHX  
  0022 9eee07           LDX   7,SP
  0025 e701             STA   1,X
  0027 86               PULA  
  0028 f7               STA   ,X
  0029 95               TSX   
  002a f6               LDA   ,X
  002b 87               PSHA  
  002c ee01             LDX   1,X
  002e 8a               PULH  
  002f e603             LDA   3,X
  0031 ee02             LDX   2,X
  0033 87               PSHA  
  0034 9ee606           LDA   6,SP
  0037 87               PSHA  
  0038 8a               PULH  
  0039 86               PULA  
  003a 89               PSHX  
  003b 9eee07           LDX   7,SP
  003e e703             STA   3,X
  0040 86               PULA  
  0041 e702             STA   2,X
  0043 9f               TXA   
  0044 8b               PSHH  
  0045 88               PULX  
  0046 a702             AIS   #2
  0048 81               RTS   
   10:  **     Version   : Driver 01.00
   11:  **
   12:  **     Compiler  : Metrowerks HC08 C Compiler V-5.0.13
   13:  **
   14:  **     Date/Time : 4/17/jueves, 15:23
   15:  **
   16:  **     Abstract  :
   17:  **
   18:  **         Main module. 
   19:  **         Here is to be placed user's code.
   20:  **
   21:  **     Settings  :
   22:  **
   23:  **
   24:  **     Contents  :
   25:  **
   26:  **         No public methods
   27:  **
   28:  **
   29:  **     (c) Copyright UNIS, spol. s r.o. 1997-2002
   30:  **
   31:  **     UNIS, spol. s r.o.
   32:  **     Jundrovska 33
   33:  **     624 00 Brno
   34:  **     Czech Republic
   35:  **
   36:  **     http      : www.processorexpert.com
   37:  **     mail      : info@processorexpert.com
   38:  **
   39:  ** ###################################################################
   40:  */
   41:  /* MODULE vph1 */
   42:  
   43:  // PARA QUE SE LINKE CORRECTAMENTE ASEGURARSE DE QUE LA SIGUIENTE LINEA EXISTE EN EL ARCHIVO VPH1.PRM
   44:  //     HEAP_SEGMENT					 INTO  HEAP;
   45:  
   46:  //#pragma MESSAGE DISABLE C1420 /* WARNING C1420: Result of function-call is ignored. You can uncomment this line to disable this compiler warning */
   47:  
   48:  /*Including used modules for compilling procedure*/
   49:  #include "vph1.h"
   50:  #include "Cpu.h"
   51:  #include "Events.h"
   52:  #include "TIMER.h"
   53:  #include "Teclado.h"
   54:  #include "IRQ.h"
   55:  /*Include shared modules, which are used for whole project*/
   56:  #include "PE_Types.h"
   57:  #include "PE_Error.h"
   58:  #include "PE_Const.h"
   59:  #include "IO_Map.h"
   60:  #include <stdio.h>
   61:  #include <ctype.h>
   62:  #include "delay.h"
   63:  #include "maincpp.h"
   64:  #include "io_map.h"
   65:  
   66:  #include "fx828.h"
   67:  
   68:  #define CTCSS_SQL	12
   69:  
   70:  
   71:  #define WALKIE_PTT	PTB_PTB5
   72:  #define APERTURA	PTC_PTC4
   73:  #define COLGADO		PTA_PTA6
   74:  #define PTT_ON		PTC_PTC2 = 0
   75:  #define PTT_OFF		PTC_PTC2 = 1
   76:  #define BEEP_ON		PTB_PTB7 = 1
   77:  #define BEEP_OFF	PTB_PTB7 = 0
   78:  
   79:  #define SQL_WALKIE_ON	PTD_PTD4==0
   80:  #define SQL_WALKIE_OFF  PTD_PTD4==1
   81:  
   82:  #define MODE_STANDBY		0
   83:  #define MODE_COMUNICATION	1
   84:  
   85:  extern "C" byte Terminal_SendChar(byte Chr);
   86:  
   87:  unsigned int const_indicativo[1]	@0xf700;
   88:  unsigned int const_walkie[1] 		@0xf702;
   89:  unsigned int const_walkiePttOn[1] 	@0xf704;
   90:  unsigned int const_walkiePttOff[1]	@0xf706;
   91:  
   92:  unsigned int indicativo;
   93:  unsigned int walkie;
   94:  unsigned int walkiePttOn;
   95:  unsigned int walkiePttOff;
   96:  
   97:  
   98:  const int RxCTCSSTable[47]={0x3d8,	/*67.0*/ 0x409,	/*69.3*/ 0x41b,	/*71.9*/
   99:  							0x44e,	/*74.4*/ 0x483,	/*77.0*/ 0x494,	/*79.7*/
  100:  							0x4cb,	/*82.5*/ 0x502,	/*85.4*/ 0x514,	/*88.5*/
  101:  							0x54c,	/*91.5*/ 0x587,	/*94.8*/ 0x594,	/*97.4*/
  102:  							0x5cb,	/*100.0*/0x607,	/*103.5*/0x645,	/*107.2*/
  103:  							0x682,	/*110.9*/0x6c0,	/*114.8*/0x6d1,	/*118.8*/
  104:  							0x710,	/*123.0*/0x750,	/*127.3*/0x7c0,	/*131.8*/
  105:  							0x802,	/*136.5*/0x884,	/*141.3*/0x886,	/*146.2*/
  106:  							0x8c9,	/*151.4*/0x90c,	/*156.7*/0x948,	/*159.8*/
  107:  							0x982,	/*162.2*/0x9c6,	/*167.9*/0xa0b,	/*173.8*/
  108:  							0xa84,	/*179.9*/0xac2,	/*183.5*/0xac9,	/*186.2*/
  109:  							0xb08,	/*189.9*/0xb44,	/*192.8*/0xb83,	/*196.6*/
  110:  							0xb8a,	/*199.5*/0xbc9,	/*203.5*/0xc06,	/*206.5*/
  111:  							0xc46,	/*210.7*/0xcc3,	/*218.1*/0xd41,	/*225.7*/
  112:  							0xd48,	/*229.1*/0xd89,	/*233.6*/0xe08,	/*241.8*/
  113:  							0xe88,	/*250.3*/0xec7};/*254.1*/
  114:  								 
  115:  const int RxZVEI1Table[15]={0xc44,	/*2400 0*/
  116:  							0x553,	/*1060 1*/
  117:  							0x5d2,	/*1160 2*/
  118:  							0x683,	/*1270 3*/
  119:  							0x70e,	/*1400 4*/
  120:  							0x7c8,	/*1530 5*/
  121:  							0x886,	/*1670 6*/
  122:  							0x949,	/*1830 7*/
  123:  							0xa42,	/*2000 8*/
  124:  							0xb43,	/*2200 9*/
  125:  							0xe46,	/*2800 A*/
  126:  							0x414,	/*810  B*/
  127:  							0x4d8,	/*970  C*/
  128:  							0x486,	/*885  D*/
  129:  							0xd45};	/*2600 E*/
  130:  
  131:  
  132:  bool SelCallDetected;
  133:  bool bSQL;
  134:  
  135:  union 		//Indicativo recibido
  136:  {
  137:  	struct
  138:  	{
  139:  		char low	:8;
  140:  		char high	:8;
  141:  	}_byte;
  142:  	int valor;
  143:  	
  144:  }IndicRx;
  145:  
  146:  void PutString (char *string)
  147:  {

Function: PutString( unsigned char*)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  0000 87               PSHA  
  0001 89               PSHX  
  0002 a7fe             AIS   #-2
  148:  	int n;
  149:  	for (n=0;string[n]!=0;n++)
  0004 95               TSX   
  0005 6f01             CLR   1,X
  0007 7f               CLR   ,X
  0008 200f             BRA   L19 ;abs = 0019
  000a          LA:     
  000a ad15             BSR   L21 ;abs = 0021
  150:  		while (Terminal_SendChar (string[n])==ERR_TXFULL);
  000c f6               LDA   ,X
  000d cd0000           JSR   Terminal_SendChar
  0010 410bf7           CBEQA #11,LA ;abs = 000a
  0013 95               TSX   
  0014 6c01             INC   1,X
  0016 2601             BNE   L19 ;abs = 0019
  0018 7c               INC   ,X
  0019          L19:    
  0019 ad06             BSR   L21 ;abs = 0021
  001b 7d               TST   ,X
  001c 26ec             BNE   LA ;abs = 000a
  151:  }
  001e a704             AIS   #4
  0020 81               RTS   
  0021          L21:    
  0021 95               TSX   
  0022 e605             LDA   5,X
  0024 eb03             ADD   3,X
  0026 87               PSHA  
  0027 e602             LDA   2,X
  0029 e904             ADC   4,X
  002b 87               PSHA  
  002c 8a               PULH  
  002d 88               PULX  
  002e 81               RTS   
  152:  
  153:  CFX828 FX828;
  154:  BOOL bMode;
  155:  
  156:  void EnableTX (bool enable)
  157:  {

Function: EnableTX( unsigned char)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  0000 87               PSHA  
  158:  	FX828.Mod1Enable (enable);
  0001 450000           LDHX  @FX828
  0004 89               PSHX  
  0005 8b               PSHH  
  0006 ae1f             LDX   #31
  0008 cd0000           JSR   Mod1Enable
  000b a702             AIS   #2
  159:  //	FX828.Mod2Enable (~enable);
  160:  	FX828.CTCSS_tx_enable (enable);	//Fin transmisión
  000d 450000           LDHX  @FX828
  0010 89               PSHX  
  0011 8b               PSHH  
  0012 95               TSX   
  0013 e602             LDA   2,X
  0015 cd0000           JSR   CTCSS_tx_enable
  0018 a702             AIS   #2
  161:  	PTC_PTC2 = ~enable;
  001a 95               TSX   
  001b f6               LDA   ,X
  001c a501             BIT   #1
  001e 2604             BNE   L24 ;abs = 0024
  0020 1400             BSET  2,_PTC
  162:  }
  0022 8a               PULH  
  0023 81               RTS   
  0024          L24:    
  0024 1500             BCLR  2,_PTC
  0026 8a               PULH  
  0027 81               RTS   
  163:  
  164:  //TIMBRE
  165:  void GeneraTimbre (void)
  166:  {

Function: GeneraTimbre( void)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  0000 a7fc             AIS   #-4
  167:  	int n,i;
  168:  	
  169:  //	FX828.EnableToneDecoder (FALSE,SELCALL_MODE);
  170:  	for (n=0;n<5 && (COLGADO && SQL_WALKIE_OFF);n++)
  0002 95               TSX   
  0003 6f03             CLR   3,X
  0005 6f02             CLR   2,X
  0007 2045             BRA   L4E ;abs = 004e
  0009          L9:     
  171:  	{
  172:  		BEEP_ON;
  0009 1e00             BSET  7,_PTB
  173:  		for (i=0;i<500 && (COLGADO && SQL_WALKIE_OFF);i++)
  000b 95               TSX   
  000c 6f01             CLR   1,X
  000e 7f               CLR   ,X
  000f 2006             BRA   L17 ;abs = 0017
  0011          L11:    
  0011 ad4f             BSR   L62 ;abs = 0062
  0013 95               TSX   
  0014 2601             BNE   L17 ;abs = 0017
  0016 7c               INC   ,X
  0017          L17:    
  0017 95               TSX   
  0018 f6               LDA   ,X
  0019 87               PSHA  
  001a ee01             LDX   1,X
  001c 8a               PULH  
  001d 6501f4           CPHX  #500
  0020 9006             BGE   L28 ;abs = 0028
  0022 0d0003           BRCLR 6,_PTA,L28 ;abs = 0028
  0025 0800e9           BRSET 4,_PTD,L11 ;abs = 0011
  0028          L28:    
  174:  			delay_ms(1);
  175:  		
  176:  		BEEP_OFF;				
  0028 1f00             BCLR  7,_PTB
  177:  		for (i=0;i<200 && (COLGADO && SQL_WALKIE_OFF);i++)
  002a 95               TSX   
  002b 6f01             CLR   1,X
  002d 7f               CLR   ,X
  002e 2006             BRA   L36 ;abs = 0036
  0030          L30:    
  0030 ad30             BSR   L62 ;abs = 0062
  0032 95               TSX   
  0033 2601             BNE   L36 ;abs = 0036
  0035 7c               INC   ,X
  0036          L36:    
  0036 95               TSX   
  0037 f6               LDA   ,X
  0038 87               PSHA  
  0039 ee01             LDX   1,X
  003b 8a               PULH  
  003c 6500c8           CPHX  #200
  003f 9006             BGE   L47 ;abs = 0047
  0041 0d0003           BRCLR 6,_PTA,L47 ;abs = 0047
  0044 0800e9           BRSET 4,_PTD,L30 ;abs = 0030
  0047          L47:    
  0047 95               TSX   
  0048 6c03             INC   3,X
  004a 2602             BNE   L4E ;abs = 004e
  004c 6c02             INC   2,X
  004e          L4E:    
  004e e602             LDA   2,X
  0050 87               PSHA  
  0051 ee03             LDX   3,X
  0053 8a               PULH  
  0054 650005           CPHX  #5
  0057 9006             BGE   L5F ;abs = 005f
  0059 0d0003           BRCLR 6,_PTA,L5F ;abs = 005f
  005c 0800aa           BRSET 4,_PTD,L9 ;abs = 0009
  005f          L5F:    
  178:  			delay_ms(1);
  179:  	}
  180:  //	FX828.EnableToneDecoder (TRUE,SELCALL_MODE);
  181:  }
  005f a704             AIS   #4
  0061 81               RTS   
  0062          L62:    
  0062 a601             LDA   #1
  0064 5f               CLRX  
  0065 cd0000           JSR   delay_ms
  0068 95               TSX   
  0069 6c03             INC   3,X
  006b 81               RTS   
  182:  
  183:  void ErrorIndicativo(void)
  184:  {

Function: ErrorIndicativo( void)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  0000 a7fe             AIS   #-2
  185:  	int n;
  186:  	FX828.EnableToneDecoder (FALSE,SELCALL_MODE);
  0002 450000           LDHX  @FX828
  0005 89               PSHX  
  0006 8b               PSHH  
  0007 4f               CLRA  
  0008 ae01             LDX   #1
  000a cd0000           JSR   EnableToneDecoder
  000d a702             AIS   #2
  187:  	FX828.ZVEI_tx_enable (TRUE);
  000f 450000           LDHX  @FX828
  0012 89               PSHX  
  0013 8b               PSHH  
  0014 a601             LDA   #1
  0016 cd0000           JSR   ZVEI_tx_enable
  0019 a702             AIS   #2
  001b          L1B:    
  188:  
  189:  	while (TRUE)	//Mientras esté descolgado
  190:  	{
  191:  		for (n=100;n<300;n++)
  001b a664             LDA   #100
  001d 95               TSX   
  001e e701             STA   1,X
  0020 7f               CLR   ,X
  0021          L21:    
  192:  			FX828.ProgramZVEI(n);	
  0021 95               TSX   
  0022 e601             LDA   1,X
  0024 fe               LDX   ,X
  0025 87               PSHA  
  0026 cd0000           JSR   _SEXT16_32
  0029 95               TSX   
  002a cd0000           JSR   _FSFLOAT
  002d 450000           LDHX  @FX828
  0030 89               PSHX  
  0031 8b               PSHH  
  0032 95               TSX   
  0033 e605             LDA   5,X
  0035 87               PSHA  
  0036 e604             LDA   4,X
  0038 87               PSHA  
  0039 e603             LDA   3,X
  003b 87               PSHA  
  003c e602             LDA   2,X
  003e 87               PSHA  
  003f cd0000           JSR   ProgramZVEI
  0042 a706             AIS   #6
  0044 95               TSX   
  0045 6c09             INC   9,X
  0047 2602             BNE   L4B ;abs = 004b
  0049 6c08             INC   8,X
  004b          L4B:    
  004b e608             LDA   8,X
  004d 87               PSHA  
  004e ee09             LDX   9,X
  0050 8a               PULH  
  0051 65012c           CPHX  #300
  0054 a708             AIS   #8
  0056 90c3             BGE   L1B ;abs = 001b
  0058 20c7             BRA   L21 ;abs = 0021
  193:  	}
  194:  }
  195:  
  196:  //TONOS INDICACIÓN DESCONEXIÓN
  197:  void UnlinkSignal(void)
  198:  {

Function: UnlinkSignal( void)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  199:  	FX828.ProgramZVEI(400.0);	
  0000 450000           LDHX  @FX828
  0003 89               PSHX  
  0004 8b               PSHH  
  0005 4f               CLRA  
  0006 87               PSHA  
  0007 87               PSHA  
  0008 4543c8           LDHX  #17352
  000b 89               PSHX  
  000c 8b               PSHH  
  000d cd0000           JSR   ProgramZVEI
  0010 a706             AIS   #6
  200:  	FX828.EnableToneDecoder (FALSE,SELCALL_MODE);
  0012 450000           LDHX  @FX828
  0015 89               PSHX  
  0016 8b               PSHH  
  0017 4f               CLRA  
  0018 ae01             LDX   #1
  001a cd0000           JSR   EnableToneDecoder
  001d a702             AIS   #2
  201:  
  202:  	while (!COLGADO)	//Mientras esté descolgado
  001f 2023             BRA   L44 ;abs = 0044
  0021          L21:    
  203:  	{
  204:  		FX828.ZVEI_tx_enable (TRUE);
  0021 450000           LDHX  @FX828
  0024 89               PSHX  
  0025 8b               PSHH  
  0026 a601             LDA   #1
  0028 cd0000           JSR   ZVEI_tx_enable
  002b a702             AIS   #2
  205:  		delay_ms(100);
  002d a664             LDA   #100
  002f 5f               CLRX  
  0030 cd0000           JSR   delay_ms
  206:  		FX828.ZVEI_tx_enable (FALSE);
  0033 450000           LDHX  @FX828
  0036 89               PSHX  
  0037 8b               PSHH  
  0038 4f               CLRA  
  0039 cd0000           JSR   ZVEI_tx_enable
  003c a702             AIS   #2
  207:  		delay_ms(100);
  003e a664             LDA   #100
  0040 5f               CLRX  
  0041 cd0000           JSR   delay_ms
  0044          L44:    
  0044 0d00da           BRCLR 6,_PTA,L21 ;abs = 0021
  208:  	}
  209:  
  210:  }
  0047 81               RTS   
  211:  
  212:  //TONOS INDICACIÓN LÍNEA OCUPADA
  213:  void BussySignal(void)
  214:  {

Function: BussySignal( void)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  215:  	FX828.ProgramZVEI(400.0);	
  0000 450000           LDHX  @FX828
  0003 89               PSHX  
  0004 8b               PSHH  
  0005 4f               CLRA  
  0006 87               PSHA  
  0007 87               PSHA  
  0008 4543c8           LDHX  #17352
  000b 89               PSHX  
  000c 8b               PSHH  
  000d cd0000           JSR   ProgramZVEI
  0010 a706             AIS   #6
  216:  	FX828.EnableToneDecoder (FALSE,SELCALL_MODE);
  0012 450000           LDHX  @FX828
  0015 89               PSHX  
  0016 8b               PSHH  
  0017 4f               CLRA  
  0018 ae01             LDX   #1
  001a cd0000           JSR   EnableToneDecoder
  001d a702             AIS   #2
  217:  
  218:  	while (!COLGADO)	//Mientras esté descolgado
  001f 2025             BRA   L46 ;abs = 0046
  0021          L21:    
  219:  	{
  220:  		FX828.ZVEI_tx_enable (TRUE);
  0021 450000           LDHX  @FX828
  0024 89               PSHX  
  0025 8b               PSHH  
  0026 a601             LDA   #1
  0028 cd0000           JSR   ZVEI_tx_enable
  002b a702             AIS   #2
  221:  		delay_ms(500);
  002d a6f4             LDA   #-12
  002f ae01             LDX   #1
  0031 cd0000           JSR   delay_ms
  222:  		FX828.ZVEI_tx_enable (FALSE);
  0034 450000           LDHX  @FX828
  0037 89               PSHX  
  0038 8b               PSHH  
  0039 4f               CLRA  
  003a cd0000           JSR   ZVEI_tx_enable
  003d a702             AIS   #2
  223:  		delay_ms(500);
  003f a6f4             LDA   #-12
  0041 ae01             LDX   #1
  0043 cd0000           JSR   delay_ms
  0046          L46:    
  0046 0d00d8           BRCLR 6,_PTA,L21 ;abs = 0021
  224:  	}
  225:  }
  0049 81               RTS   
  226:  
  227:  //Antes de abrir la puerta, nos aseguramos de los rebotes del pulsador
  228:  //Si se mantienen altos fijos durante 100ms enviaremos el subtono de apertura
  229:  //y devolveremos un TRUE.
  230:  //En caso contrario devolvemos un FALSE sin ninguna acción.
  231:  
  232:  bool apertura(void)
  233:  {

Function: apertura( void)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  0000 a7fe             AIS   #-2
  234:  	char tmp=~APERTURA;
  0002 080003           BRSET 4,_PTC,L8 ;abs = 0008
  0005 a6ff             LDA   #-1
  0007 65               SKIP2 LA ;abs = 000a
  0008          L8:     
  0008 a6fe             LDA   #-2
  000a          LA:     
  000a 95               TSX   
  000b e701             STA   1,X
  235:  	char n;
  236:  
  237:  	//Bucle antirebotes	
  238:  	for (n=0;n<10;n++)
  000d 7f               CLR   ,X
  000e          LE:     
  239:  	{
  240:  		delay_ms(1);
  000e a601             LDA   #1
  0010 5f               CLRX  
  0011 cd0000           JSR   delay_ms
  241:  		if (APERTURA==tmp)
  0014 080002           BRSET 4,_PTC,L19 ;abs = 0019
  0017 4f               CLRA  
  0018 65               SKIP2 L1B ;abs = 001b
  0019          L19:    
  0019 a601             LDA   #1
  001b          L1B:    
  001b 95               TSX   
  001c e101             CMP   1,X
  001e 260b             BNE   L2B ;abs = 002b
  242:  		{
  243:  			n=0;
  0020 7f               CLR   ,X
  244:  			tmp=~APERTURA;
  0021 080003           BRSET 4,_PTC,L27 ;abs = 0027
  0024 a6ff             LDA   #-1
  0026 65               SKIP2 L29 ;abs = 0029
  0027          L27:    
  0027 a6fe             LDA   #-2
  0029          L29:    
  0029 e701             STA   1,X
  002b          L2B:    
  002b 7c               INC   ,X
  002c f6               LDA   ,X
  002d a10a             CMP   #10
  002f 25dd             BCS   LE ;abs = 000e
  245:  		}
  246:  	}
  247:  
  248:  	if (APERTURA)	//¿Ha estado la línea alta fija durante 10ms?
  0031 09002c           BRCLR 4,_PTC,L60 ;abs = 0060
  249:  	{
  250:  		EnableTX (TRUE);
  0034 a601             LDA   #1
  0036 cd0000           JSR   EnableTX
  251:  		FX828.ProgramFastCTCSS (123); //Transmitimos subtono de apertura
  0039 450000           LDHX  @FX828
  003c 89               PSHX  
  003d 8b               PSHH  
  003e a67b             LDA   #123
  0040 5f               CLRX  
  0041 cd0000           JSR   ProgramFastCTCSS
  0044 a702             AIS   #2
  252:  		delay_ms (3000);
  0046 a6b8             LDA   #-72
  0048 ae0b             LDX   #11
  004a cd0000           JSR   delay_ms
  004d          L4D:    
  253:  		while (APERTURA);			 //Mientras están pulsando el botón
  004d 0800fd           BRSET 4,_PTC,L4D ;abs = 004d
  254:  		FX828.ProgramFastCTCSS (100); //Reestablecemos subtono
  0050 450000           LDHX  @FX828
  0053 89               PSHX  
  0054 8b               PSHH  
  0055 a664             LDA   #100
  0057 5f               CLRX  
  0058 cd0000           JSR   ProgramFastCTCSS
  005b a702             AIS   #2
  255:  		return TRUE;
  005d a601             LDA   #1
  005f 21               SKIP1 L61 ;abs = 0061
  0060          L60:    
  256:  	}
  257:  	return FALSE;
  0060 4f               CLRA  
  0061          L61:    
  258:  }
  0061 a702             AIS   #2
  0063 81               RTS   
  259:  void comunicando (void)
  260:  {

Function: comunicando( void)
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  0000 8b               PSHH  
  261:  	int n,i;
  262:  	bool bFlag=FALSE;
  0001 95               TSX   
  0002 7f               CLR   ,X
  263:  
  264:  	delay_ms(100);
  0003 a664             LDA   #100
  0005 5f               CLRX  
  0006 cd0000           JSR   delay_ms
  265:  	if (COLGADO && SQL_WALKIE_ON)
  0009 0d0007           BRCLR 6,_PTA,L13 ;abs = 0013
  000c 080004           BRSET 4,_PTD,L13 ;abs = 0013
  266:  	{
  267:  		bFlag=TRUE;
  000f a601             LDA   #1
  0011 95               TSX   
  0012 f7               STA   ,X
  0013          L13:    
  268:  	}
  269:  	
  270:  	// Esperamos al subtono de la puerta
  271:  
  272:  	PTT_ON;
  0013 1500             BCLR  2,_PTC
  273:  	FX828.ProgramZVEI(400.0);		//Tono de espera comunicación
  0015 450000           LDHX  @FX828
  0018 89               PSHX  
  0019 8b               PSHH  
  001a 4f               CLRA  
  001b 87               PSHA  
  001c 87               PSHA  
  001d 4543c8           LDHX  #17352
  0020 89               PSHX  
  0021 8b               PSHH  
  0022 cd0000           JSR   ProgramZVEI
  0025 a706             AIS   #6
  274:  	FX828.CTCSS_tx_enable (TRUE);
  0027 450000           LDHX  @FX828
  002a 89               PSHX  
  002b 8b               PSHH  
  002c a601             LDA   #1
  002e cd0000           JSR   CTCSS_tx_enable
  0031 a702             AIS   #2
  275:  	FX828.ZVEI_tx_enable (TRUE);
  0033 450000           LDHX  @FX828
  0036 89               PSHX  
  0037 8b               PSHH  
  0038 a601             LDA   #1
  003a cd0000           JSR   ZVEI_tx_enable
  003d a702             AIS   #2
  276:  	FX828.Mod1Enable (TRUE);
  003f 450000           LDHX  @FX828
  0042 89               PSHX  
  0043 8b               PSHH  
  0044 a601             LDA   #1
  0046 ae1f             LDX   #31
  0048 cd0000           JSR   Mod1Enable
  004b a702             AIS   #2
  004d cd0138           JSR   L138 ;abs = 0138
  277:  	even_timeout=120000;
  0050 c70001           STA   even_timeout:1
  0053 5f               CLRX  
  0054 cf0000           STX   even_timeout
  278:  	
  279:  	FX828.EnableBPF (TRUE);    	//Habilitamos salida de audio rx
  0057 450000           LDHX  @FX828
  005a 89               PSHX  
  005b 8b               PSHH  
  005c cd0000           JSR   EnableBPF
  005f a702             AIS   #2
  280:  	if (bFlag)
  0061 95               TSX   
  0062 7d               TST   ,X
  0063 2703             BEQ   L68 ;abs = 0068
  0065 cc0102           JMP   L102 ;abs = 0102
  0068          L68:    
  0068 cd0138           JSR   L138 ;abs = 0138
  006b cc0108           JMP   L108 ;abs = 0108
  006e          L6E:    
  281:  		even_timeout=6000;
  282:  	else
  283:  		even_timeout=120000;
  284:  	
  285:  	//Mientras recibamos subtono, no cuelguen y no salte el time out
  286:  	while ((!COLGADO || bFlag) && even_timeout)
  287:  	{
  288:  		if (!bFlag && COLGADO)
  006e 95               TSX   
  006f 7d               TST   ,X
  0070 260d             BNE   L7F ;abs = 007f
  0072 0d000a           BRCLR 6,_PTA,L7F ;abs = 007f
  289:  			even_timeout=FALSE;
  0075 4f               CLRA  
  0076 c70003           STA   even_timeout:3
  0079 c70002           STA   even_timeout:2
  007c cd014d           JSR   L14D ;abs = 014d
  007f          L7F:    
  290:  							
  291:  		if (SQL_WALKIE_ON && bFlag)
  007f 08000e           BRSET 4,_PTD,L90 ;abs = 0090
  0082 95               TSX   
  0083 7d               TST   ,X
  0084 270a             BEQ   L90 ;abs = 0090
  0086 cd0145           JSR   L145 ;abs = 0145
  292:  			even_timeout=6000;
  0089 c70002           STA   even_timeout:2
  008c 4f               CLRA  
  008d cd014d           JSR   L14D ;abs = 014d
  0090          L90:    
  293:  					
  294:  		if (SelCallDetected)
  0090 c60000           LDA   SelCallDetected
  0093 2767             BEQ   LFC ;abs = 00fc
  295:  		{
  296:  			SelCallDetected=FALSE;
  0095 4f               CLRA  
  0096 c70000           STA   SelCallDetected
  297:  			if (IndicRx.valor==walkiePttOn)
  0099 c60001           LDA   walkiePttOn:1
  009c 87               PSHA  
  009d c60000           LDA   walkiePttOn
  00a0 87               PSHA  
  00a1 c60001           LDA   IndicRx:1
  00a4 ce0000           LDX   IndicRx
  00a7 cd0000           JSR   _ICMP
  00aa 260b             BNE   LB7 ;abs = 00b7
  298:  			{
  299:  				WALKIE_PTT = TRUE;
  00ac 1a00             BSET  5,_PTB
  300:  				even_timeout=30000;
  00ae a630             LDA   #48
  00b0 c70003           STA   even_timeout:3
  00b3 a675             LDA   #117
  301:  			}
  00b5 203f             BRA   LF6 ;abs = 00f6
  00b7          LB7:    
  302:  			else if (IndicRx.valor==walkiePttOff)
  00b7 c60001           LDA   walkiePttOff:1
  00ba 87               PSHA  
  00bb c60000           LDA   walkiePttOff
  00be 87               PSHA  
  00bf c60001           LDA   IndicRx:1
  00c2 ce0000           LDX   IndicRx
  00c5 cd0000           JSR   _ICMP
  00c8 2604             BNE   LCE ;abs = 00ce
  303:  			{
  304:  				WALKIE_PTT = FALSE;
  00ca 1b00             BCLR  5,_PTB
  305:  				even_timeout=6000;						
  306:  			}
  00cc 2026             BRA   LF4 ;abs = 00f4
  00ce          LCE:    
  307:  			else 
  308:  			{
  309:  				EnableTX (TRUE);
  00ce a601             LDA   #1
  00d0 cd0000           JSR   EnableTX
  310:  				FX828.ProgramFastCTCSS (123); //Transmitimos subtono de apertura
  00d3 450000           LDHX  @FX828
  00d6 89               PSHX  
  00d7 8b               PSHH  
  00d8 a67b             LDA   #123
  00da 5f               CLRX  
  00db cd0000           JSR   ProgramFastCTCSS
  00de a702             AIS   #2
  311:  				delay_ms (3000);
  00e0 a6b8             LDA   #-72
  00e2 ae0b             LDX   #11
  00e4 cd0000           JSR   delay_ms
  312:  				FX828.ProgramFastCTCSS (100); //Reestablecemos subtono
  00e7 450000           LDHX  @FX828
  00ea 89               PSHX  
  00eb 8b               PSHH  
  00ec a664             LDA   #100
  00ee 5f               CLRX  
  00ef cd0000           JSR   ProgramFastCTCSS
  00f2 a702             AIS   #2
  00f4          LF4:    
  00f4 ad4f             BSR   L145 ;abs = 0145
  00f6          LF6:    
  313:  				even_timeout = 6000;		  //Empezamos la cuenta del time out					
  00f6 c70002           STA   even_timeout:2
  00f9 4f               CLRA  
  00fa ad51             BSR   L14D ;abs = 014d
  00fc          LFC:    
  314:  			}
  315:  		}
  316:  					
  317:  		if (APERTURA)	//Si hay subtono de RX,está descolgado y pulsan apertura.
  00fc 090010           BRCLR 4,_PTC,L10F ;abs = 010f
  318:  		{
  319:  			apertura();
  00ff cd0000           JSR   apertura
  0102          L102:   
  0102 ad41             BSR   L145 ;abs = 0145
  320:  			even_timeout = 6000;		  //Empezamos la cuenta del time out					
  0104 c70002           STA   even_timeout:2
  0107 4f               CLRA  
  0108          L108:   
  0108 c70001           STA   even_timeout:1
  010b 4f               CLRA  
  010c c70000           STA   even_timeout
  010f          L10F:   
  010f 0d0004           BRCLR 6,_PTA,L116 ;abs = 0116
  0112 95               TSX   
  0113 7d               TST   ,X
  0114 270f             BEQ   L125 ;abs = 0125
  0116          L116:   
  0116 450000           LDHX  @even_timeout
  0119 e603             LDA   3,X
  011b ea02             ORA   2,X
  011d ea01             ORA   1,X
  011f fa               ORA   ,X
  0120 2703             BEQ   L125 ;abs = 0125
  0122 cc006e           JMP   L6E ;abs = 006e
  0125          L125:   
  321:  		}
  322:  	}		
  323:  	EnableTX (FALSE);
  0125 4f               CLRA  
  0126 cd0000           JSR   EnableTX
  324:  	FX828.EnableBPF (FALSE);    	//Habilitamos salida de audio rx
  0129 450000           LDHX  @FX828
  012c 89               PSHX  
  012d 8b               PSHH  
  012e 4f               CLRA  
  012f cd0000           JSR   EnableBPF
  0132 a702             AIS   #2
  325:  	WALKIE_PTT=FALSE;	
  0134 1b00             BCLR  5,_PTB
  326:  }
  0136 8a               PULH  
  0137 81               RTS   
  0138          L138:   
  0138 a6c0             LDA   #-64
  013a c70003           STA   even_timeout:3
  013d a6d4             LDA   #-44
  013f c70002           STA   even_timeout:2
  0142 a601             LDA   #1
  0144 81               RTS   
  0145          L145:   
  0145 a670             LDA   #112
  0147 c70003           STA   even_timeout:3
  014a a617             LDA   #23
  014c 81               RTS   
  014d          L14D:   
  014d c70001           STA   even_timeout:1
  0150 c70000           STA   even_timeout
  0153 81               RTS   
  327:  
  328:  void maincpp (void)
  329:  {

Function: maincpp
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  0000 a7f9             AIS   #-7
  330:  	char str[5];
  331:  	int n;
  332:  	indicativo = *const_indicativo;
  0002 c60001           LDA   const_indicativo:1
  0005 c70001           STA   indicativo:1
  0008 c60000           LDA   const_indicativo
  000b c70000           STA   indicativo
  333:  	walkie = *const_walkie;
  000e c60001           LDA   const_walkie:1
  0011 c70001           STA   walkie:1
  0014 c60000           LDA   const_walkie
  0017 c70000           STA   walkie
  334:  	walkiePttOn =*const_walkiePttOn;
  001a c60001           LDA   const_walkiePttOn:1
  001d c70001           STA   walkiePttOn:1
  0020 c60000           LDA   const_walkiePttOn
  0023 c70000           STA   walkiePttOn
  335:  	walkiePttOff =*const_walkiePttOff;
  0026 c60001           LDA   const_walkiePttOff:1
  0029 c70001           STA   walkiePttOff:1
  002c c60000           LDA   const_walkiePttOff
  002f c70000           STA   walkiePttOff
  336:  	
  337:  	DDRA_DDRA6 = FALSE;
  0032 1d00             BCLR  6,_DDRA
  338:  	DDRB_DDRB7 = TRUE;
  0034 1e00             BSET  7,_DDRB
  339:  	DDRB_DDRB5 = TRUE;
  0036 1a00             BSET  5,_DDRB
  340:  	DDRC_DDRC4 = FALSE;
  0038 1900             BCLR  4,_DDRC
  341:  	DDRC_DDRC2 = TRUE;
  003a 1400             BSET  2,_DDRC
  342:  	DDRD_DDRD4 = FALSE;
  003c 1900             BCLR  4,_DDRD
  343:  	
  344:  	SelCallDetected = FALSE;
  003e 4f               CLRA  
  003f c70000           STA   SelCallDetected
  345:  	BEEP_OFF;
  0042 1f00             BCLR  7,_PTB
  346:  	bSQL=FALSE;
  0044 c70000           STA   bSQL
  347:  	WALKIE_PTT = FALSE;
  0047 1b00             BCLR  5,_PTB
  0049          L49:    
  348:  
  349:  	while (Terminal_SendChar ((UCHAR)HIBYTE (indicativo))==ERR_TXFULL);
  0049 c60000           LDA   indicativo
  004c cd0000           JSR   Terminal_SendChar
  004f 410bf7           CBEQA #11,L49 ;abs = 0049
  0052          L52:    
  350:  	while (Terminal_SendChar ((UCHAR)LOBYTE (indicativo))==ERR_TXFULL);
  0052 c60001           LDA   indicativo:1
  0055 cd0000           JSR   Terminal_SendChar
  0058 a10b             CMP   #11
  005a 27f6             BEQ   L52 ;abs = 0052
  351:  
  352:  	bMode=MODE_STANDBY;
  005c 4f               CLRA  
  005d c70000           STA   bMode
  353:  	EnableInterrupts;
  0060 9a               CLI   
  354:  	FX828.Init ();
  0061 a600             LDA   @FX828
  0063 ae00             LDX   @FX828:MSB
  0065 cd0000           JSR   Init
  355:  
  356:  	//Grabamos los tonos ZVEEI en la tabla  RX TONE PROGRAM TABLE
  357:  	for (n=0;n<15;n++)
  0068 95               TSX   
  0069 6f01             CLR   1,X
  006b 7f               CLR   ,X
  006c          L6C:    
  358:  		FX828.PutToneTable (n,RxZVEI1Table[n]);
  006c 450000           LDHX  @FX828
  006f 89               PSHX  
  0070 8b               PSHH  
  0071 95               TSX   
  0072 ee03             LDX   3,X
  0074 89               PSHX  
  0075 58               LSLX  
  0076 9f               TXA   
  0077 8c               CLRH  
  0078 97               TAX   
  0079 d60001           LDA   @RxZVEI1Table:1,X
  007c de0000           LDX   @RxZVEI1Table,X
  007f cd0000           JSR   PutToneTable
  0082 a703             AIS   #3
  0084 95               TSX   
  0085 6c01             INC   1,X
  0087 2601             BNE   L8A ;abs = 008a
  0089 7c               INC   ,X
  008a          L8A:    
  008a f6               LDA   ,X
  008b 87               PSHA  
  008c ee01             LDX   1,X
  008e 8a               PULH  
  008f 65000f           CPHX  #15
  0092 91d8             BLT   L6C ;abs = 006c
  359:  		
  360:  	FX828.SetDecoderBandwidth (0x0f);				//Ponemos el ancho de banda a 2.7
  0094 450000           LDHX  @FX828
  0097 89               PSHX  
  0098 8b               PSHH  
  0099 a60f             LDA   #15
  009b cd0000           JSR   SetDecoderBandwidth
  009e a702             AIS   #2
  361:  	FX828.ProgramFastCTCSS (100);					//Esperamos subtonos de 100 Hz
  00a0 450000           LDHX  @FX828
  00a3 89               PSHX  
  00a4 8b               PSHH  
  00a5 a664             LDA   #100
  00a7 5f               CLRX  
  00a8 cd0000           JSR   ProgramFastCTCSS
  00ab a702             AIS   #2
  362:  	FX828.EnableCTCSSDecoder (TRUE,DETECT_MODE);
  00ad 450000           LDHX  @FX828
  00b0 89               PSHX  
  00b1 8b               PSHH  
  00b2 a601             LDA   #1
  00b4 5f               CLRX  
  00b5 cd0000           JSR   EnableCTCSSDecoder
  00b8 a702             AIS   #2
  363:  	
  364:  	FX828.Mod1Enable (FALSE);	//Deshabilitamos mod1		
  00ba 450000           LDHX  @FX828
  00bd 89               PSHX  
  00be 8b               PSHH  
  00bf 4f               CLRA  
  00c0 ae1f             LDX   #31
  00c2 cd0000           JSR   Mod1Enable
  00c5 a702             AIS   #2
  365:  	FX828.Mod2Enable (TRUE);
  00c7 450000           LDHX  @FX828
  00ca 89               PSHX  
  00cb 8b               PSHH  
  00cc ae1f             LDX   #31
  00ce a601             LDA   #1
  00d0 cd0000           JSR   Mod2Enable
  00d3 a702             AIS   #2
  00d5 cd019b           JSR   L19B ;abs = 019b
  366:  	FX828.EnableToneDecoder (TRUE,SELCALL_MODE);
  367:  
  368:  	if (indicativo==0xffff)
  00d8 ce0000           LDX   indicativo
  00db 89               PSHX  
  00dc 8a               PULH  
  00dd ce0001           LDX   indicativo:1
  00e0 65ffff           CPHX  #-1
  00e3 2603             BNE   LE8 ;abs = 00e8
  369:  		ErrorIndicativo();
  00e5 cd0000           JSR   ErrorIndicativo
  00e8          LE8:    
  00e8 cc0198           JMP   L198 ;abs = 0198
  00eb          LEB:    
  370:  
  371:  
  372:  	for(;;)
  373:  	{
  374:  		if (!COLGADO) 	//El usuario descuelga sin que llamen.
  00eb 0c0003           BRSET 6,_PTA,LF1 ;abs = 00f1
  375:  			comunicando();						//Realiza la comunicación
  00ee cd0000           JSR   comunicando
  00f1          LF1:    
  376:  			
  377:  		if (SQL_WALKIE_ON)
  00f1 08000d           BRSET 4,_PTD,L101 ;abs = 0101
  378:  		{
  379:  			delay_ms (300);
  00f4 a62c             LDA   #44
  00f6 ae01             LDX   #1
  00f8 cd0000           JSR   delay_ms
  380:  			if (SQL_WALKIE_ON)
  00fb 080003           BRSET 4,_PTD,L101 ;abs = 0101
  381:  				comunicando();
  00fe cd0000           JSR   comunicando
  0101          L101:   
  382:  		}
  383:  		
  384:  		//Pulsan apertura sin haber descolgado y sin que hayan llamado.
  385:  		//Pero no se recibe ningún subtono
  386:  		if (APERTURA)
  0101 09000a           BRCLR 4,_PTC,L10E ;abs = 010e
  387:  		{
  388:  			if (apertura())
  0104 cd0000           JSR   apertura
  0107 4d               TSTA  
  0108 2704             BEQ   L10E ;abs = 010e
  389:  				EnableTX (FALSE);				
  010a 4f               CLRA  
  010b cd0000           JSR   EnableTX
  010e          L10E:   
  390:  		}
  391:  		
  392:  		if (SelCallDetected)
  010e c60000           LDA   SelCallDetected
  0111 2603             BNE   L116 ;abs = 0116
  0113 cc0198           JMP   L198 ;abs = 0198
  0116          L116:   
  393:  		{	
  394:  			
  395:  			SelCallDetected=FALSE;
  0116 4f               CLRA  
  0117 c70000           STA   SelCallDetected
  396:  			if (!COLGADO)
  011a 0c0003           BRSET 6,_PTA,L120 ;abs = 0120
  397:  				BussySignal();
  011d cd0000           JSR   BussySignal
  0120          L120:   
  398:  				
  399:  			if (IndicRx.valor==indicativo)
  0120 c60001           LDA   indicativo:1
  0123 87               PSHA  
  0124 c60000           LDA   indicativo
  0127 87               PSHA  
  0128 c60001           LDA   IndicRx:1
  012b ce0000           LDX   IndicRx
  012e cd0000           JSR   _ICMP
  0131 2665             BNE   L198 ;abs = 0198
  400:  			{
  401:  				//Genera los beeps de timbre
  402:  				
  403:  
  404:  				//Llama al walkie
  405:  				FX828.EnableToneDecoder (FALSE,SELCALL_MODE);
  0133 450000           LDHX  @FX828
  0136 89               PSHX  
  0137 8b               PSHH  
  0138 4f               CLRA  
  0139 ae01             LDX   #1
  013b cd0000           JSR   EnableToneDecoder
  013e a702             AIS   #2
  406:  				sprintf (str,"%04d",walkie);	
  0140 c60001           LDA   walkie:1
  0143 87               PSHA  
  0144 c60000           LDA   walkie
  0147 87               PSHA  
  0148 450000           LDHX  @"%04d"
  014b 89               PSHX  
  014c 8b               PSHH  
  014d 95               TSX   
  014e af06             AIX   #6
  0150 89               PSHX  
  0151 8b               PSHH  
  0152 cd0000           JSR   sprintf
  0155 a706             AIS   #6
  407:  				FX828.CTCSS_tx_enable (TRUE);
  0157 450000           LDHX  @FX828
  015a 89               PSHX  
  015b 8b               PSHH  
  015c a601             LDA   #1
  015e cd0000           JSR   CTCSS_tx_enable
  0161 a702             AIS   #2
  408:  				WALKIE_PTT = TRUE;				
  0163 1a00             BSET  5,_PTB
  409:  				delay_ms(300);
  0165 a62c             LDA   #44
  0167 ae01             LDX   #1
  0169 cd0000           JSR   delay_ms
  410:  				DisableInterrupts;
  016c 9b               SEI   
  411:  				FX828.TxZVEI (0x0b);
  016d 450000           LDHX  @FX828
  0170 89               PSHX  
  0171 8b               PSHH  
  0172 a60b             LDA   #11
  0174 cd0000           JSR   TxZVEI
  0177 a702             AIS   #2
  412:  				FX828.TxZVEI (str);
  0179 450000           LDHX  @FX828
  017c 89               PSHX  
  017d 8b               PSHH  
  017e 95               TSX   
  017f af04             AIX   #4
  0181 9f               TXA   
  0182 8b               PSHH  
  0183 88               PULX  
  0184 cd0000           JSR   TxZVEI
  0187 a702             AIS   #2
  413:  				EnableInterrupts;
  0189 9a               CLI   
  414:  				delay_ms (500);
  018a a6f4             LDA   #-12
  018c ae01             LDX   #1
  018e cd0000           JSR   delay_ms
  415:  				WALKIE_PTT = FALSE;
  0191 1b00             BCLR  5,_PTB
  416:  				GeneraTimbre();			
  0193 cd0000           JSR   GeneraTimbre
  0196 ad03             BSR   L19B ;abs = 019b
  0198          L198:   
  417:  				FX828.EnableToneDecoder (TRUE,SELCALL_MODE);
  418:  
  419:  			}
  420:  		}
  421:  	}
  0198 cc00eb           JMP   LEB ;abs = 00eb
  019b          L19B:   
  019b 450000           LDHX  @FX828
  019e 89               PSHX  
  019f 8b               PSHH  
  01a0 a601             LDA   #1
  01a2 97               TAX   
  01a3 cd0000           JSR   EnableToneDecoder
  01a6 a702             AIS   #2
  01a8 81               RTS   
  422:  }
  423:  
  424:  #ifdef __cplusplu
  425:  	extern "C"
  426:  #endif
  427:  void MainIRQ ()
  428:  {

Function: MainIRQ
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106

  0000 8b               PSHH  
  429:  	static byte buffer[4];
  430:  	static bool bStart;
  431:  	static byte idx;
  432:  	byte tono;
  433:  	int n;
  434:  	
  435:  	FX828.IRQService();
  0001 a600             LDA   @FX828
  0003 ae00             LDX   @FX828:MSB
  0005 cd0000           JSR   IRQService
  436:  
  437:  	tono = FX828.GetTone();
  0008 a600             LDA   @FX828
  000a ae00             LDX   @FX828:MSB
  000c cd0000           JSR   GetTone
  000f 95               TSX   
  0010 f7               STA   ,X
  438:  	
  439:  	if (bMode == MODE_STANDBY)
  0011 c60000           LDA   bMode
  0014 267b             BNE   L91 ;abs = 0091
  440:  	{
  441:  		if (FX828.CTCSS_Detected ())
  0016 a600             LDA   @FX828
  0018 ae00             LDX   @FX828:MSB
  001a cd0000           JSR   CTCSS_Detected
  001d 4d               TSTA  
  001e 2702             BEQ   L22 ;abs = 0022
  442:  			bSQL=TRUE;
  0020 a601             LDA   #1
  0022          L22:    
  443:  		else
  444:  			bSQL=FALSE;
  0022 c70000           STA   bSQL
  445:  			
  446:  		if (tono!=0xff && tono!=UNKNOWN_TONE)	//Hemos detectado un tono conocido
  0025 95               TSX   
  0026 f6               LDA   ,X
  0027 41ff67           CBEQA #-1,L91 ;abs = 0091
  002a 410f64           CBEQA #15,L91 ;abs = 0091
  447:  		{		
  448:  			if (bStart==TRUE)
  002d ce0000           LDX   bStart
  0030 5b51             DBNZX L83 ;abs = 0083
  449:  			{
  450:  				buffer[idx++]=tono;	
  0032 ce0000           LDX   idx
  0035 89               PSHX  
  0036 5c               INCX  
  0037 cf0000           STX   idx
  003a 88               PULX  
  003b 8c               CLRH  
  003c d70000           STA   @buffer,X
  451:  				if (idx==4)
  003f c60000           LDA   idx
  0042 a104             CMP   #4
  0044 263d             BNE   L83 ;abs = 0083
  452:  				{
  453:  					IndicRx._byte.low  = MAKEBYTE (buffer[0],buffer[1]);
  0046 450000           LDHX  @buffer
  0049 f6               LDA   ,X
  004a 62               NSA   
  004b a4f0             AND   #-16
  004d ea01             ORA   1,X
  004f c80000           EOR   IndicRx
  0052 c80000           EOR   IndicRx
  0055 c70000           STA   IndicRx
  454:  					IndicRx._byte.high = MAKEBYTE (buffer[2],buffer[3]);
  0058 e602             LDA   2,X
  005a 62               NSA   
  005b a4f0             AND   #-16
  005d ea03             ORA   3,X
  005f 450001           LDHX  @IndicRx:1
  0062 f8               EOR   ,X
  0063 f8               EOR   ,X
  0064 f7               STA   ,X
  455:  					SelCallDetected = TRUE;	
  0065 a601             LDA   #1
  0067 c70000           STA   SelCallDetected
  456:  					idx =0;
  006a 4f               CLRA  
  006b c70000           STA   idx
  457:  					bStart=FALSE;
  006e c70000           STA   bStart
  0071          L71:    
  458:  
  459:  					while (Terminal_SendChar ((UCHAR)IndicRx._byte.high)==ERR_TXFULL);
  0071 c60001           LDA   IndicRx:1
  0074 cd0000           JSR   Terminal_SendChar
  0077 410bf7           CBEQA #11,L71 ;abs = 0071
  007a          L7A:    
  460:  					while (Terminal_SendChar ((UCHAR)IndicRx._byte.low)==ERR_TXFULL);				
  007a c60000           LDA   IndicRx
  007d cd0000           JSR   Terminal_SendChar
  0080 410bf7           CBEQA #11,L7A ;abs = 007a
  0083          L83:    
  461:  				}		
  462:  			}
  463:  
  464:  			if (tono==0xb)	//Inicio de trama
  0083 95               TSX   
  0084 f6               LDA   ,X
  0085 a10b             CMP   #11
  0087 2608             BNE   L91 ;abs = 0091
  465:  			{
  466:  				idx=0;
  0089 4f               CLRA  
  008a c70000           STA   idx
  467:  				bStart=TRUE;
  008d 4c               INCA  
  008e c70000           STA   bStart
  0091          L91:    
  468:  			}		
  469:  		}	
  470:  	}	
  471:  }
  0091 8a               PULH  
  0092 81               RTS   

Function: __ConstructorInit__
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 a600             LDA   @FX828
  0002 ae00             LDX   @FX828:MSB
  0004 cc0000           JMP   CONSTRUCTOR

Function: __DestructorInit__
Source  : Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code\main.cpp
Options : -Cc -Env"GENPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa;Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin;Z:\vph1\Personalizado\pedido 4340\v4\Casa\cmd;*Z:\vph1\Personalizado\pedido 4340\v4\Casa\Code;Z:\vph1\Personalizado\pedido 4340\v4\Casa\prm;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\LIB;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\src;*D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\Bin\Plugins\support\ProcessorExpert;*Z:\vph1\Personalizado\pedido 4340\v4\Comun;*Z:\vph1\Personalizado\pedido 4340\v4;D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"LIBPATH=D:\Archivos de programa\Metrowerks\CodeWarrior HC08_V2.0\lib\HC08c\INCLUDE" -Env"OBJPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Env"TEXTPATH=Z:\vph1\Personalizado\pedido 4340\v4\Casa\bin" -Lasm=%n.lst -ObjN="Z:\vph1\Personalizado\pedido 4340\v4\Casa\vph1_Data\P&E_PEDebug_FCS-ICS-ICD\ObjectCode\main.cpp.o" -Qvtpfar -WmsgSd1106


No source information available for functions created by the compiler internally
  0000 a600             LDA   @FX828
  0002 ae00             LDX   @FX828:MSB
  0004 cc0000           JMP   DESTRUCTOR
  472:  
  473:  /* END vph1 */
  474:  /*
  475:  ** ###################################################################
  476:  **
  477:  **     This file was created by UNIS Processor Expert 02.89 for 
  478:  **     the Motorola HC08 series of microcontrollers.
  479:  **
  480:  ** ###################################################################
  481:  */
  482:  
